import{o as gs,r as S,_ as ct,u as xs,a as vs,j as s,b as D,c as ys,g as Jt,d as qt,s as K,e as Yt,F as ws,f as Kt,h as bs,i as Y,k as Ee,l as Zt,m as Ns,n as B,p as Z,q as oe,I,t as L,v as js,w as Ie,x as de,V as Ss,S as we,O as ce,y as Cs,D as Re,z as Es,A as Ze,B as W,C as se,E as $s,G as ks,H as F,J as Is,T as _,K as Rs,L as Ts,M as As,N as Os,U as Ae,P as Ls,Q as Ps,R as zs,W as Ds,X as Us,Y as Qt,Z as Fs,$ as _s,a0 as Bs,a1 as Hs,a2 as Ms,a3 as Vs,a4 as Gs,a5 as Ws,a6 as je,a7 as Xs,a8 as vt,a9 as Js}from"./index-3e380d35.js";import{i as Oe}from"./memo-35bf2c75.js";import{L as es,A as ts,D as pe}from"./LocaleSelect-c23298e6.js";import{T as qs}from"./Tooltip-047e58ac.js";function Ys(t,e=166){let a;function r(...n){const i=()=>{t.apply(this,n)};clearTimeout(a),a=setTimeout(i,e)}return r.clear=()=>{clearTimeout(a)},r}function yt(t){return gs(t).defaultView||window}const Ks=["onChange","maxRows","minRows","style","value"];function Le(t){return parseInt(t,10)||0}const Zs={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function wt(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const Qs=S.forwardRef(function(e,a){const{onChange:r,maxRows:n,minRows:i=1,style:o,value:l}=e,c=ct(e,Ks),{current:g}=S.useRef(l!=null),d=S.useRef(null),h=xs(a,d),v=S.useRef(null),m=S.useRef(0),[b,u]=S.useState({outerHeightStyle:0}),w=S.useCallback(()=>{const p=d.current,T=yt(p).getComputedStyle(p);if(T.width==="0px")return{outerHeightStyle:0};const z=v.current;z.style.width=T.width,z.value=p.value||e.placeholder||"x",z.value.slice(-1)===`
`&&(z.value+=" ");const le=T.boxSizing,he=Le(T.paddingBottom)+Le(T.paddingTop),y=Le(T.borderBottomWidth)+Le(T.borderTopWidth),f=z.scrollHeight;z.value="x";const E=z.scrollHeight;let N=f;i&&(N=Math.max(Number(i)*E,N)),n&&(N=Math.min(Number(n)*E,N)),N=Math.max(N,E);const C=N+(le==="border-box"?he+y:0),j=Math.abs(N-f)<=1;return{outerHeightStyle:C,overflow:j}},[n,i,e.placeholder]),O=(p,x)=>{const{outerHeightStyle:T,overflow:z}=x;return m.current<20&&(T>0&&Math.abs((p.outerHeightStyle||0)-T)>1||p.overflow!==z)?(m.current+=1,{overflow:z,outerHeightStyle:T}):p},G=S.useCallback(()=>{const p=w();wt(p)||u(x=>O(x,p))},[w]),X=()=>{const p=w();wt(p)||ys.flushSync(()=>{u(x=>O(x,p))})};S.useEffect(()=>{const p=Ys(()=>{m.current=0,d.current&&X()});let x;const T=d.current,z=yt(T);return z.addEventListener("resize",p),typeof ResizeObserver<"u"&&(x=new ResizeObserver(p),x.observe(T)),()=>{p.clear(),z.removeEventListener("resize",p),x&&x.disconnect()}}),vs(()=>{G()}),S.useEffect(()=>{m.current=0},[l]);const J=p=>{m.current=0,g||G(),r&&r(p)};return s.jsxs(S.Fragment,{children:[s.jsx("textarea",D({value:l,onChange:J,ref:h,rows:i,style:D({height:b.outerHeightStyle,overflow:b.overflow?"hidden":void 0},o)},c)),s.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:D({},Zs.shadow,o,{padding:0})})]})}),ea=Qs;function ta(t){return qt("MuiSwitch",t)}const sa=Jt("MuiSwitch",["root","checked","disabled","action","input","thumb","track","focusVisible","readOnly","colorPrimary","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid","startDecorator","endDecorator"]),ot=sa,aa=["checked","defaultChecked","disabled","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","id","color","variant","size","startDecorator","endDecorator"],ra=t=>{const{checked:e,disabled:a,focusVisible:r,readOnly:n,color:i,variant:o}=t,l={root:["root",e&&"checked",a&&"disabled",r&&"focusVisible",n&&"readOnly",o&&`variant${Ee(o)}`,i&&`color${Ee(i)}`],thumb:["thumb",e&&"checked"],track:["track",e&&"checked"],action:["action",r&&"focusVisible"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Zt(l,ta,{})},na=({theme:t,ownerState:e})=>(a={})=>{var r;const n=((r=t.variants[`${e.variant}${a.state||""}`])==null?void 0:r[e.color])||{};return{"--Switch-trackBackground":n.backgroundColor,"--Switch-trackColor":n.color,"--Switch-trackBorderColor":e.variant==="outlined"?n.borderColor:"currentColor","--Switch-thumbBackground":n.color,"--Switch-thumbColor":n.backgroundColor}},ia=K("div",{name:"JoySwitch",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{var a,r;const n=na({theme:t,ownerState:e});return D({"--variant-borderWidth":(a=t.variants[e.variant])==null||(r=a[e.color])==null?void 0:r["--variant-borderWidth"],"--Switch-trackRadius":t.vars.radius.lg,"--Switch-thumbShadow":e.variant==="soft"?"none":"0 0 0 1px var(--Switch-trackBackground)"},e.size==="sm"&&{"--Switch-trackWidth":"40px","--Switch-trackHeight":"20px","--Switch-thumbSize":"12px","--Switch-gap":"6px",fontSize:t.vars.fontSize.sm},e.size==="md"&&{"--Switch-trackWidth":"48px","--Switch-trackHeight":"24px","--Switch-thumbSize":"16px","--Switch-gap":"8px",fontSize:t.vars.fontSize.md},e.size==="lg"&&{"--Switch-trackWidth":"64px","--Switch-trackHeight":"32px","--Switch-thumbSize":"24px","--Switch-gap":"12px"},{"--unstable_paddingBlock":"max((var(--Switch-trackHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Switch-thumbSize)) / 2, 0px)","--Switch-thumbRadius":"max(var(--Switch-trackRadius) - var(--unstable_paddingBlock), min(var(--unstable_paddingBlock) / 2, var(--Switch-trackRadius) / 2))","--Switch-thumbWidth":"var(--Switch-thumbSize)","--Switch-thumbOffset":"max((var(--Switch-trackHeight) - var(--Switch-thumbSize)) / 2, 0px)"},n(),{"&:hover":D({},n({state:"Hover"})),[`&.${ot.checked}`]:D({},n(),{"&:hover":D({},n({state:"Hover"}))}),[`&.${ot.disabled}`]:D({pointerEvents:"none",color:t.vars.palette.text.tertiary},n({state:"Disabled"})),display:"inline-flex",alignItems:"center",alignSelf:"center",fontFamily:t.vars.fontFamily.body,position:"relative",padding:"calc((var(--Switch-thumbSize) / 2) - (var(--Switch-trackHeight) / 2)) calc(-1 * var(--Switch-thumbOffset))",backgroundColor:"initial",border:"none"})}),oa=K("div",{name:"JoySwitch",slot:"Action",overridesResolver:(t,e)=>e.action})(({theme:t})=>({borderRadius:"var(--Switch-trackRadius)",position:"absolute",top:0,left:0,bottom:0,right:0,[t.focus.selector]:t.focus.default})),la=K("input",{name:"JoySwitch",slot:"Input",overridesResolver:(t,e)=>e.input})({margin:0,height:"100%",width:"100%",opacity:0,position:"absolute",cursor:"pointer"}),ca=K("span",{name:"JoySwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>D({position:"relative",color:"var(--Switch-trackColor)",height:"var(--Switch-trackHeight)",width:"var(--Switch-trackWidth)",display:"flex",flexShrink:0,justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",border:"var(--variant-borderWidth, 0px) solid",borderColor:"var(--Switch-trackBorderColor)",backgroundColor:"var(--Switch-trackBackground)",borderRadius:"var(--Switch-trackRadius)",fontFamily:t.vars.fontFamily.body},e.size==="sm"&&{fontSize:t.vars.fontSize.xs},e.size==="md"&&{fontSize:t.vars.fontSize.sm},e.size==="lg"&&{fontSize:t.vars.fontSize.md})),da=K("span",{name:"JoySwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})({"--Icon-fontSize":"calc(var(--Switch-thumbSize) * 0.75)",display:"inline-flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",left:"calc(50% - var(--Switch-trackWidth) / 2 + var(--Switch-thumbWidth) / 2 + var(--Switch-thumbOffset))",transform:"translate(-50%, -50%)",width:"var(--Switch-thumbWidth)",height:"var(--Switch-thumbSize)",borderRadius:"var(--Switch-thumbRadius)",boxShadow:"var(--Switch-thumbShadow)",color:"var(--Switch-thumbColor)",backgroundColor:"var(--Switch-thumbBackground)",[`&.${ot.checked}`]:{left:"calc(50% + var(--Switch-trackWidth) / 2 - var(--Switch-thumbWidth) / 2 - var(--Switch-thumbOffset))"}}),ha=K("span",{name:"JoySwitch",slot:"StartDecorator",overridesResolver:(t,e)=>e.startDecorator})({display:"inline-flex",marginInlineEnd:"var(--Switch-gap)"}),ma=K("span",{name:"JoySwitch",slot:"EndDecorator",overridesResolver:(t,e)=>e.endDecorator})({display:"inline-flex",marginInlineStart:"var(--Switch-gap)"}),ua=S.forwardRef(function(e,a){var r,n,i,o,l;const c=Yt({props:e,name:"JoySwitch"}),{checked:g,defaultChecked:d,disabled:h,onBlur:v,onChange:m,onFocus:b,onFocusVisible:u,readOnly:w,id:O,color:G,variant:X="solid",size:J="md",startDecorator:p,endDecorator:x}=c,T=ct(c,aa),z=S.useContext(ws),le=(r=(n=e.disabled)!=null?n:z==null?void 0:z.disabled)!=null?r:h,he=(i=(o=e.size)!=null?o:z==null?void 0:z.size)!=null?i:J,{getColor:y}=Kt(X),f=y(e.color,z!=null&&z.error?"danger":(l=z==null?void 0:z.color)!=null?l:G),E={checked:g,defaultChecked:d,disabled:le,onBlur:v,onChange:m,onFocus:b,onFocusVisible:u,readOnly:w},{getInputProps:N,checked:C,disabled:j,focusVisible:k,readOnly:R}=bs(E),$=D({},c,{id:O,checked:C,disabled:j,focusVisible:k,readOnly:R,color:C?f||"primary":f||"neutral",variant:X,size:he}),A=ra($),[M,U]=Y("root",{ref:a,className:A.root,elementType:ia,externalForwardedProps:T,ownerState:$}),[ae,Te]=Y("startDecorator",{additionalProps:{"aria-hidden":!0},className:A.startDecorator,elementType:ha,externalForwardedProps:T,ownerState:$}),[Je,qe]=Y("endDecorator",{additionalProps:{"aria-hidden":!0},className:A.endDecorator,elementType:ma,externalForwardedProps:T,ownerState:$}),[Ye,Ke]=Y("track",{className:A.track,elementType:ca,externalForwardedProps:T,ownerState:$}),[ds,hs]=Y("thumb",{className:A.thumb,elementType:da,externalForwardedProps:T,ownerState:$}),[ms,us]=Y("action",{className:A.action,elementType:oa,externalForwardedProps:T,ownerState:$}),[ps,fs]=Y("input",{additionalProps:{id:O??(z==null?void 0:z.htmlFor),"aria-describedby":z==null?void 0:z["aria-describedby"]},className:A.input,elementType:la,externalForwardedProps:T,getSlotProps:N,ownerState:$});return s.jsxs(M,D({},U,{children:[p&&s.jsx(ae,D({},Te,{children:typeof p=="function"?p($):p})),s.jsxs(Ye,D({},Ke,{children:[Ke==null?void 0:Ke.children,s.jsx(ds,D({},hs))]})),s.jsx(ms,D({},us,{children:s.jsx(ps,D({},fs))})),x&&s.jsx(Je,D({},qe,{children:typeof x=="function"?x($):x}))]}))}),$e=ua;function pa(t){return qt("MuiTextarea",t)}const fa=Jt("MuiTextarea",["root","textarea","startDecorator","endDecorator","formControl","disabled","error","focused","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft"]),Fe=fa,ga=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","size","color","variant","startDecorator","endDecorator","minRows","maxRows"],xa=t=>{const{disabled:e,variant:a,color:r,size:n}=t,i={root:["root",e&&"disabled",a&&`variant${Ee(a)}`,r&&`color${Ee(r)}`,n&&`size${Ee(n)}`],textarea:["textarea"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Zt(i,pa,{})},va=K("div",{name:"JoyTextarea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{var a,r,n,i,o;const l=(a=t.variants[`${e.variant}`])==null?void 0:a[e.color];return[D({"--Textarea-radius":t.vars.radius.sm,"--Textarea-gap":"0.5rem","--Textarea-placeholderColor":"inherit","--Textarea-placeholderOpacity":.5,"--Textarea-focusedThickness":t.vars.focus.thickness},e.color==="context"?{"--Textarea-focusedHighlight":t.vars.palette.focusVisible}:{"--Textarea-focusedHighlight":(r=t.vars.palette[e.color==="neutral"?"primary":e.color])==null?void 0:r[500]},e.size==="sm"&&{"--Textarea-minHeight":"2rem","--Textarea-paddingBlock":"calc(0.5rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.5rem","--Textarea-decoratorChildHeight":"min(1.5rem, var(--Textarea-minHeight))","--Icon-fontSize":"1.25rem"},e.size==="md"&&{"--Textarea-minHeight":"2.5rem","--Textarea-paddingBlock":"calc(0.5rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.75rem","--Textarea-decoratorChildHeight":"min(2rem, var(--Textarea-minHeight))","--Icon-fontSize":"1.5rem"},e.size==="lg"&&{"--Textarea-minHeight":"3rem","--Textarea-paddingBlock":"calc(0.75rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"1rem","--Textarea-gap":"0.75rem","--Textarea-decoratorChildHeight":"min(2.375rem, var(--Textarea-minHeight))","--Icon-fontSize":"1.75rem"},{"--_Textarea-paddingBlock":"max((var(--Textarea-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Textarea-decoratorChildHeight)) / 2, 0px)","--Textarea-decoratorChildRadius":"max(var(--Textarea-radius) - var(--variant-borderWidth, 0px) - var(--_Textarea-paddingBlock), min(var(--_Textarea-paddingBlock) + var(--variant-borderWidth, 0px), var(--Textarea-radius) / 2))","--Button-minHeight":"var(--Textarea-decoratorChildHeight)","--IconButton-size":"var(--Textarea-decoratorChildHeight)","--Button-radius":"var(--Textarea-decoratorChildRadius)","--IconButton-radius":"var(--Textarea-decoratorChildRadius)",boxSizing:"border-box",minWidth:0,minHeight:"var(--Textarea-minHeight)",cursor:"text",position:"relative",display:"flex",flexDirection:"column",paddingInlineStart:"var(--Textarea-paddingInline)",paddingBlock:"var(--Textarea-paddingBlock)",borderRadius:"var(--Textarea-radius)",fontFamily:t.vars.fontFamily.body,fontSize:t.vars.fontSize.md,lineHeight:t.vars.lineHeight.md},e.size==="sm"&&{fontSize:t.vars.fontSize.sm,lineHeight:t.vars.lineHeight.sm},{"&:before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"}}),D({},l,{backgroundColor:(n=l==null?void 0:l.backgroundColor)!=null?n:t.vars.palette.background.surface,[`&:hover:not(.${Fe.focused})`]:D({},(i=t.variants[`${e.variant}Hover`])==null?void 0:i[e.color],{backgroundColor:null,cursor:"text"}),[`&.${Fe.disabled}`]:(o=t.variants[`${e.variant}Disabled`])==null?void 0:o[e.color],[`&.${Fe.focused}`]:{"&:before":{boxShadow:"inset 0 0 0 var(--Textarea-focusedThickness) var(--Textarea-focusedHighlight)"}}})]}),ya=K(ea,{name:"JoyTextarea",slot:"Textarea",overridesResolver:(t,e)=>e.textarea})({resize:"none",border:"none",minWidth:0,outline:0,padding:0,paddingInlineEnd:"var(--Textarea-paddingInline)",flex:"auto",alignSelf:"stretch",color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit","&:-webkit-autofill":{WebkitBackgroundClip:"text",WebkitTextFillColor:"currentColor"},"&::-webkit-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"}}),wa=K("div",{name:"JoyTextarea",slot:"StartDecorator",overridesResolver:(t,e)=>e.startDecorator})(({theme:t})=>({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockEnd:"var(--Textarea-gap)",color:t.vars.palette.text.tertiary,cursor:"initial"})),ba=K("div",{name:"JoyTextarea",slot:"EndDecorator",overridesResolver:(t,e)=>e.endDecorator})(({theme:t})=>({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockStart:"var(--Textarea-gap)",color:t.vars.palette.text.tertiary,cursor:"initial"})),Na=S.forwardRef(function(e,a){var r,n,i,o,l,c,g;const d=Yt({props:e,name:"JoyTextarea"}),h=Ns(d,Fe),{propsToForward:v,rootStateClasses:m,inputStateClasses:b,getRootProps:u,getInputProps:w,formControl:O,focused:G,error:X=!1,disabled:J=!1,size:p="md",color:x="neutral",variant:T="outlined",startDecorator:z,endDecorator:le,minRows:he,maxRows:y}=h,f=ct(h,ga),E=(r=(n=e.disabled)!=null?n:O==null?void 0:O.disabled)!=null?r:J,N=(i=(o=e.error)!=null?o:O==null?void 0:O.error)!=null?i:X,C=(l=(c=e.size)!=null?c:O==null?void 0:O.size)!=null?l:p,{getColor:j}=Kt(T),k=j(e.color,N?"danger":(g=O==null?void 0:O.color)!=null?g:x),R=D({},d,{color:k,disabled:E,error:N,focused:G,size:C,variant:T}),$=xa(R),[A,M]=Y("root",{ref:a,className:[$.root,m],elementType:va,externalForwardedProps:f,getSlotProps:u,ownerState:R}),[U,ae]=Y("textarea",{additionalProps:{id:O==null?void 0:O.htmlFor,"aria-describedby":O==null?void 0:O["aria-describedby"]},className:[$.textarea,b],elementType:ya,internalForwardedProps:D({},v,{minRows:he,maxRows:y}),externalForwardedProps:f,getSlotProps:w,ownerState:R}),[Te,Je]=Y("startDecorator",{className:$.startDecorator,elementType:wa,externalForwardedProps:f,ownerState:R}),[qe,Ye]=Y("endDecorator",{className:$.endDecorator,elementType:ba,externalForwardedProps:f,ownerState:R});return s.jsxs(A,D({},M,{children:[z&&s.jsx(Te,D({},Je,{children:z})),s.jsx(U,D({},ae)),le&&s.jsx(qe,D({},Ye,{children:le}))]}))}),lt=Na,ja={sm:640,md:768,lg:1024},bt=t=>{const{className:e}=t,{t:a}=B();return s.jsx("span",{className:`mx-1 px-1 leading-5 text-xs border dark:border-zinc-600 rounded-full text-gray-500 dark:text-gray-400 ${e??""}`,children:a("common.beta")})},Sa=({destroy:t})=>{const{t:e}=B(),a=oe(),[r,n]=S.useState(""),[i,o]=S.useState("");S.useEffect(()=>{},[]);const l=()=>{t()},c=h=>{const v=h.target.value;n(v)},g=h=>{const v=h.target.value;o(v)},d=async()=>{if(r===""||i===""){L.error(e("message.fill-all"));return}if(r!==i){L.error(e("message.new-password-not-match")),o("");return}try{const h=a.getState().user;await a.patchUser({id:h.id,password:r}),L.success(e("message.password-changed")),l()}catch(h){console.error(h),L.error(h.response.data.message)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container !w-64",children:[s.jsx("p",{className:"title-text",children:e("setting.account-section.change-password")}),s.jsx("button",{className:"btn close-btn",onClick:l,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container",children:[s.jsx("p",{className:"text-sm mb-1",children:e("auth.new-password")}),s.jsx("input",{type:"password",autoComplete:"new-password",className:"input-text",placeholder:e("auth.new-password"),value:r,onChange:c}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:e("auth.repeat-new-password")}),s.jsx("input",{type:"password",autoComplete:"new-password",className:"input-text",placeholder:e("auth.repeat-new-password"),value:i,onChange:g}),s.jsxs("div",{className:"mt-4 w-full flex flex-row justify-end items-center space-x-2",children:[s.jsx("span",{className:"btn-text",onClick:l,children:e("common.cancel")}),s.jsx("span",{className:"btn-primary",onClick:d,children:e("common.save")})]})]})]})};function Ca(){Z({className:"change-password-dialog",dialogName:"change-password-dialog"},Sa)}const dt=t=>{const{avatarUrl:e,className:a}=t;return s.jsx("div",{className:`${a??""} w-8 h-8 overflow-clip`,children:s.jsx("img",{className:"w-full h-auto rounded-full min-w-full min-h-full object-cover",src:e||"/logo.webp",alt:""})})},Ea=({destroy:t})=>{const{t:e}=B(),a=oe(),r=a.state.user,[n,i]=S.useState({avatarUrl:r.avatarUrl,username:r.username,nickname:r.nickname,email:r.email});S.useEffect(()=>{},[]);const o=()=>{t()},l=m=>{i(b=>({...b,...m}))},c=async m=>{const b=m.target.files;if(b&&b.length>0){const u=b[0];if(u.size>2*1024*1024){L.error("Max file size is 2MB");return}try{const w=await js(u);l({avatarUrl:w})}catch(w){console.error(w),L.error("Failed to convert image to base64")}}},g=m=>{l({nickname:m.target.value})},d=m=>{l({username:m.target.value})},h=m=>{i(b=>({...b,email:m.target.value}))},v=async()=>{if(n.username===""){L.error(e("message.fill-all"));return}try{const m=a.getState().user,b={id:m.id};Oe(m.avatarUrl,n.avatarUrl)||(b.avatarUrl=n.avatarUrl),Oe(m.nickname,n.nickname)||(b.nickname=n.nickname),Oe(m.username,n.username)||(b.username=n.username),Oe(m.email,n.email)||(b.email=n.email),await a.patchUser(b),L.success(e("message.update-succeed")),o()}catch(m){console.error(m),L.error(m.response.data.error)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container !w-64",children:[s.jsx("p",{className:"title-text",children:e("setting.account-section.update-information")}),s.jsx("button",{className:"btn close-btn",onClick:o,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container space-y-2",children:[s.jsxs("div",{className:"w-full flex flex-row justify-start items-center",children:[s.jsx("span",{className:"text-sm mr-2",children:e("common.avatar")}),s.jsxs("label",{className:"relative cursor-pointer hover:opacity-80",children:[s.jsx(dt,{className:"!w-12 !h-12",avatarUrl:n.avatarUrl}),s.jsx("input",{type:"file",accept:"image/*",className:"absolute invisible w-full h-full inset-0",onChange:c})]}),n.avatarUrl&&s.jsx(I.X,{className:"w-4 h-auto ml-1 cursor-pointer opacity-60 hover:opacity-80",onClick:()=>l({avatarUrl:""})})]}),s.jsxs("p",{className:"text-sm",children:[e("common.username"),s.jsx("span",{className:"text-sm text-gray-400 ml-1",children:e("setting.account-section.username-note")})]}),s.jsx("input",{type:"text",className:"input-text",value:n.username,onChange:d}),s.jsxs("p",{className:"text-sm",children:[e("common.nickname"),s.jsx("span",{className:"text-sm text-gray-400 ml-1",children:e("setting.account-section.nickname-note")})]}),s.jsx("input",{type:"text",className:"input-text",value:n.nickname,onChange:g}),s.jsxs("p",{className:"text-sm",children:[e("common.email"),s.jsx("span",{className:"text-sm text-gray-400 ml-1",children:e("setting.account-section.email-note")})]}),s.jsx("input",{type:"text",className:"input-text",value:n.email,onChange:h}),s.jsxs("div",{className:"pt-2 w-full flex flex-row justify-end items-center space-x-2",children:[s.jsx("span",{className:"btn-text",onClick:o,children:e("common.cancel")}),s.jsx("span",{className:"btn-primary",onClick:v,children:e("common.save")})]})]})]})};function $a(){Z({className:"update-account-dialog",dialogName:"update-account-dialog"},Ea)}const ka=()=>{const{t}=B(),e=oe(),a=e.state.user,r=`${window.location.origin}/api/memo?openId=${a.openId}`,n=async()=>{Ie({title:t("setting.account-section.openapi-reset"),content:t("setting.account-section.openapi-reset-warning"),style:"warning",dialogName:"reset-openid-dialog",onConfirm:async()=>{await e.patchUser({id:a.id,resetOpenId:!0})}})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"section-container account-section-container",children:[s.jsx("p",{className:"title-text",children:t("setting.account-section.title")}),s.jsxs("div",{className:"flex flex-row justify-start items-center",children:[s.jsx(dt,{className:"mr-2",avatarUrl:a.avatarUrl}),s.jsx("span",{className:"text-2xl leading-10 font-medium",children:a.nickname}),s.jsxs("span",{className:"text-base ml-1 text-gray-500 leading-10",children:["(",a.username,")"]})]}),s.jsx("div",{className:"flex flex-row justify-start items-center text-base text-gray-600",children:a.email}),s.jsxs("div",{className:"w-full flex flex-row justify-start items-center mt-2 space-x-2",children:[s.jsx("button",{className:"btn-normal",onClick:$a,children:t("common.edit")}),s.jsx("button",{className:"btn-normal",onClick:Ca,children:t("setting.account-section.change-password")})]})]}),s.jsxs("div",{className:"section-container openapi-section-container",children:[s.jsx("p",{className:"title-text",children:t("setting.account-section.openapi-title")}),s.jsx("p",{className:"value-text",children:r}),s.jsxs("span",{className:"btn-danger mt-2",onClick:n,children:[t("setting.account-section.reset-api")," ",s.jsx(I.RefreshCw,{className:"ml-2 h-4 w-4"})]}),s.jsx("div",{className:"usage-guide-container",children:s.jsx("pre",{children:`POST ${r}
Content-type: application/json
{
  "content": "${t("setting.account-section.openapi-sample-post",{url:window.location.origin,interpolation:{escapeValue:!1}})}"
}`})})]})]})};const Ia=()=>{const{t}=B(),e=de(),a=oe(),{appearance:r,locale:n}=e.state,{setting:i,localSetting:o}=a.state.user,l=Ss.map(u=>({value:u.value,text:t(`memo.visibility.${u.text.toLowerCase()}`)})),c=[...Array(24).keys()],g=async u=>{await a.upsertUserSetting("locale",u),e.setLocale(u)},d=async u=>{await a.upsertUserSetting("appearance",u),e.setAppearance(u)},h=async u=>{await a.upsertUserSetting("memo-visibility",u)},v=u=>{a.upsertLocalSetting({...o,enableDoubleClickEditing:u.target.checked})},m=u=>{a.upsertLocalSetting({...o,dailyReviewTimeOffset:u})},b=u=>{a.upsertLocalSetting({...o,enableAutoCollapse:u.target.checked})};return s.jsxs("div",{className:"section-container preferences-section-container",children:[s.jsx("p",{className:"title-text",children:t("common.basic")}),s.jsxs("div",{className:"form-label selector",children:[s.jsx("span",{className:"text-sm",children:t("common.language")}),s.jsx(es,{value:n,onChange:g})]}),s.jsxs("div",{className:"form-label selector",children:[s.jsx("span",{className:"text-sm",children:t("setting.preference-section.theme")}),s.jsx(ts,{value:r,onChange:d})]}),s.jsx("p",{className:"title-text",children:t("setting.preference")}),s.jsxs("div",{className:"form-label selector",children:[s.jsx("span",{className:"text-sm break-keep text-ellipsis overflow-hidden",children:t("setting.preference-section.default-memo-visibility")}),s.jsx(we,{className:"!min-w-fit",value:i.memoVisibility,onChange:(u,w)=>{w&&h(w)},children:l.map(u=>s.jsx(ce,{value:u.value,children:u.text},u.value))})]}),s.jsxs("div",{className:"form-label selector",children:[s.jsx("span",{className:"text-sm break-keep text-ellipsis overflow-hidden",children:t("setting.preference-section.daily-review-time-offset")}),s.jsx("span",{className:"w-auto inline-flex",children:s.jsx(we,{placeholder:"hh",className:"!min-w-fit",value:o.dailyReviewTimeOffset,onChange:(u,w)=>{w!==null&&m(w)},slotProps:{listbox:{sx:{maxHeight:"15rem",overflow:"auto"}}},children:c.map(u=>s.jsx(ce,{value:u,className:"whitespace-nowrap",children:u.toString().padStart(2,"0")},u))})})]}),s.jsxs("label",{className:"form-label selector",children:[s.jsx("span",{className:"text-sm break-keep",children:t("setting.preference-section.enable-double-click")}),s.jsx($e,{className:"ml-2",checked:o.enableDoubleClickEditing,onChange:v})]}),s.jsxs("label",{className:"form-label selector",children:[s.jsx("span",{className:"normal-text",children:t("setting.preference-section.auto-collapse")}),s.jsx($e,{className:"ml-2",checked:o.enableAutoCollapse,onChange:b})]})]})},Ra=t=>{const{user:e,destroy:a}=t,{t:r}=B(),n=oe(),[i,o]=S.useState(""),[l,c]=S.useState("");S.useEffect(()=>{},[]);const g=()=>{a()},d=m=>{const b=m.target.value;o(b)},h=m=>{const b=m.target.value;c(b)},v=async()=>{if(i===""||l===""){L.error(r("message.fill-all"));return}if(i!==l){L.error(r("message.new-password-not-match")),c("");return}try{await n.patchUser({id:e.id,password:i}),L(r("message.password-changed")),g()}catch(m){console.error(m),L.error(m.response.data.message)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container !w-64",children:[s.jsxs("p",{className:"title-text",children:[r("setting.account-section.change-password")," (",e.username,")"]}),s.jsx("button",{className:"btn close-btn",onClick:g,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container",children:[s.jsx("p",{className:"text-sm mb-1",children:r("auth.new-password")}),s.jsx("input",{type:"password",className:"input-text",placeholder:r("auth.new-password"),value:i,onChange:d}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:r("auth.repeat-new-password")}),s.jsx("input",{type:"password",className:"input-text",placeholder:r("auth.repeat-new-password"),value:l,onChange:h}),s.jsxs("div",{className:"mt-4 w-full flex flex-row justify-end items-center space-x-2",children:[s.jsx("span",{className:"btn-text",onClick:g,children:r("common.cancel")}),s.jsx("span",{className:"btn-primary",onClick:v,children:r("common.save")})]})]})]})};function Ta(t){Z({className:"change-member-password-dialog",dialogName:"change-member-password-dialog"},Ra,{user:t})}const Aa=()=>{const{t}=B(),e=oe(),a=e.state.user,[r,n]=S.useState({createUserUsername:"",createUserPassword:""}),[i,o]=S.useState([]);S.useEffect(()=>{l()},[]);const l=async()=>{const{data:u}=(await Cs()).data;o(u)},c=u=>{n({...r,createUserUsername:u.target.value})},g=u=>{n({...r,createUserPassword:u.target.value})},d=async()=>{if(r.createUserUsername===""||r.createUserPassword===""){L.error(t("message.fill-form"));return}const u={username:r.createUserUsername,password:r.createUserPassword,role:"USER"};try{await Es(u)}catch(w){L.error(w.response.data.message)}await l(),n({createUserUsername:"",createUserPassword:""})},h=u=>{Ta(u)},v=u=>{Ie({title:t("setting.member-section.archive-member"),content:t("setting.member-section.archive-warning",{username:u.username}),style:"warning",dialogName:"archive-user-dialog",onConfirm:async()=>{await e.patchUser({id:u.id,rowStatus:"ARCHIVED"}),l()}})},m=async u=>{await e.patchUser({id:u.id,rowStatus:"NORMAL"}),l()},b=u=>{Ie({title:t("setting.member-section.delete-member"),content:t("setting.member-section.delete-warning",{username:u.username}),style:"warning",dialogName:"delete-user-dialog",onConfirm:async()=>{await e.deleteUser({id:u.id}),l()}})};return s.jsxs("div",{className:"section-container member-section-container",children:[s.jsx("p",{className:"title-text",children:t("setting.member-section.create-a-member")}),s.jsxs("div",{className:"create-member-container",children:[s.jsxs("div",{className:"input-form-container",children:[s.jsx("span",{className:"field-text",children:t("common.username")}),s.jsx("input",{type:"text",autoComplete:"new-password",placeholder:t("common.username"),value:r.createUserUsername,onChange:c})]}),s.jsxs("div",{className:"input-form-container",children:[s.jsx("span",{className:"field-text",children:t("common.password")}),s.jsx("input",{type:"password",autoComplete:"new-password",placeholder:t("common.password"),value:r.createUserPassword,onChange:g})]}),s.jsx("div",{className:"btns-container",children:s.jsx("button",{className:"btn-normal",onClick:d,children:t("common.create")})})]}),s.jsx("div",{className:"w-full flex flex-row justify-between items-center",children:s.jsx("div",{className:"title-text",children:t("setting.member-list")})}),s.jsxs("div",{className:"member-container field-container",children:[s.jsx("span",{className:"field-text",children:"ID"}),s.jsx("span",{className:"field-text username-field",children:t("common.username")}),s.jsx("span",{})]}),i.map(u=>s.jsxs("div",{className:`member-container ${u.rowStatus==="ARCHIVED"?"archived":""}`,children:[s.jsx("span",{className:"field-text id-text",children:u.id}),s.jsx("span",{className:"field-text username-text",children:u.username}),s.jsx("div",{className:"buttons-container",children:(a==null?void 0:a.id)===u.id?s.jsx("span",{className:"tip-text",children:t("common.yourself")}):s.jsx(Re,{actions:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"w-full text-left text-sm whitespace-nowrap leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>h(u),children:t("setting.account-section.change-password")}),u.rowStatus==="NORMAL"?s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>v(u),children:t("common.archive")}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>m(u),children:t("common.restore")}),s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded text-red-600 hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>b(u),children:t("common.delete")})]})]})})})]},u.id))]})},ss=t=>{window.open(t,"_blank")},Oa=t=>{const{t:e}=B(),{children:a,destroy:r,icon:n}=t,i=n,o=()=>{r()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx(i,{size:"24"}),s.jsx("p",{className:"title-text text-left",children:t.title}),s.jsx("button",{className:"btn close-btn",onClick:o,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container max-w-sm",children:[a,t.text?t.text.split(/\n|\\n/).map(l=>s.jsx("p",{className:"mt-2 break-words text-justify",children:l},l)):null,s.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end space-x-2",children:[t.url?s.jsxs(W,{className:"btn-normal",variant:"outlined",color:t.color,onClick:()=>ss(t.url),children:[e("common.learn-more"),s.jsx(I.ExternalLink,{className:"ml-1 w-4 h-4 opacity-80"})]}):null,s.jsx(W,{className:"btn-normal",variant:"outlined",color:t.color,onClick:o,children:e("common.close")})]})]})]})};function La(t){Z({className:"help-dialog",dialogName:"help-dialog",clickSpaceDestroy:!0},Oa,t)}const be=t=>{const{t:e}=B(),a=t.color??"neutral",r=t.variant??"plain",n=t.className??"",i=t.hintPlacement??"top",o="sm",l=t.text||t.children,c=t.url||l,g=t.url&&!l;let d=(()=>{switch(t.icon){case"info":return I.Info;case"help":return I.HelpCircle;case"warn":case"alert":return I.AlertTriangle;case"link":return I.ExternalLink;default:return I.HelpCircle}})();const h=(()=>{switch(t.hint){case void 0:return e((()=>{switch(l||(d=I.ExternalLink),d){case I.Info:return"common.dialog.info";case I.AlertTriangle:return"common.dialog.warning";case I.ExternalLink:return"common.learn-more";case I.HelpCircle:default:return"common.dialog.help"}})());case"":case"none":case"false":case"disabled":return;default:return t.hint}})(),v=(()=>{switch(t.size){case"sm":return 14;case"lg":return 18;case"md":default:return 16}})();if(!l&&!c&&!t.hint)return s.jsx(Ze,{className:n,color:a,variant:r,size:o,children:s.jsx(d,{size:v})});const m=b=>h?s.jsx(qs,{placement:i,title:h,color:a,variant:r,size:t.size,children:b}):b;if(c){t={...t,title:t.title??h,hint:h,color:a,variant:r,icon:d};const b=()=>{l?La(t):ss(t.url)};return d=l||g?d:I.ExternalLink,m(s.jsx(Ze,{className:n,color:a,variant:r,size:o,onClick:b,children:s.jsx(d,{size:v})}))}return m(s.jsx(Ze,{className:n,color:a,variant:r,size:o,children:s.jsx(d,{size:v})}))},Pa=({destroy:t})=>{const{t:e}=B(),a=de(),[r,n]=S.useState(a.state.systemStatus.customizedProfile),i=()=>{t()},o=b=>{n(u=>({...u,...b}))},l=b=>{o({name:b.target.value})},c=b=>{o({logoUrl:b.target.value})},g=b=>{o({description:b.target.value})},d=b=>{o({locale:b})},h=b=>{o({appearance:b})},v=()=>{o({name:"memos",logoUrl:"/logo.webp",description:"",locale:"en",appearance:"system",externalUrl:""})},m=async()=>{if(r.name===""){L.error(e("message.fill-server-name"));return}try{await se({name:"customized-profile",value:JSON.stringify(r)}),await a.fetchSystemStatus()}catch(b){console.error(b);return}L.success(e("message.succeed-update-customized-profile")),t()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx("p",{className:"title-text",children:e("setting.system-section.customize-server.title")}),s.jsx("button",{className:"btn close-btn",onClick:i,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container min-w-[16rem]",children:[s.jsxs("p",{className:"text-sm mb-1",children:[e("setting.system-section.server-name"),s.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",e("setting.system-section.customize-server.default"),")"]})]}),s.jsx("input",{type:"text",className:"input-text",value:r.name,onChange:l}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:e("setting.system-section.customize-server.icon-url")}),s.jsx("input",{type:"text",className:"input-text",value:r.logoUrl,onChange:c}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:e("setting.system-section.customize-server.description")}),s.jsx(lt,{minRows:"2",maxRows:"4",className:"!input-text",value:r.description,onChange:g}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:e("setting.system-section.customize-server.locale")}),s.jsx(es,{className:"!w-full",value:r.locale,onChange:d}),s.jsx("p",{className:"text-sm mb-1 mt-2",children:e("setting.system-section.customize-server.appearance")}),s.jsx(ts,{className:"!w-full",value:r.appearance,onChange:h}),s.jsxs("div",{className:"mt-4 w-full flex flex-row justify-between items-center space-x-2",children:[s.jsx("div",{className:"flex flex-row justify-start items-center",children:s.jsx("button",{className:"btn-normal",onClick:v,children:e("common.restore")})}),s.jsxs("div",{className:"flex flex-row justify-end items-center",children:[s.jsx("button",{className:"btn-text",onClick:i,children:e("common.cancel")}),s.jsx("button",{className:"btn-primary",onClick:m,children:e("common.save")})]})]})]})]})};function za(){Z({className:"update-customized-profile-dialog",dialogName:"update-customized-profile-dialog"},Pa)}const Da=()=>{const{t}=B(),e=de(),a=e.state.systemStatus,[r,n]=S.useState({dbSize:a.dbSize,allowSignUp:a.allowSignUp,ignoreUpgrade:a.ignoreUpgrade,additionalStyle:a.additionalStyle,additionalScript:a.additionalScript,disablePublicMemos:a.disablePublicMemos,maxUploadSizeMiB:a.maxUploadSizeMiB}),[i,o]=S.useState({key:"",host:""});S.useEffect(()=>{e.fetchSystemStatus()},[]),S.useEffect(()=>{$s().then(({data:{data:p}})=>{const x=p.find(T=>T.name==="openai-config");x&&o(JSON.parse(x.value))})},[]),S.useEffect(()=>{n({...r,dbSize:a.dbSize,allowSignUp:a.allowSignUp,additionalStyle:a.additionalStyle,additionalScript:a.additionalScript,disablePublicMemos:a.disablePublicMemos,maxUploadSizeMiB:a.maxUploadSizeMiB})},[a]);const l=async p=>{n({...r,allowSignUp:p}),await se({name:"allow-signup",value:JSON.stringify(p)})},c=async p=>{n({...r,ignoreUpgrade:p}),await se({name:"ignore-upgrade",value:JSON.stringify(p)})},g=()=>{za()},d=async()=>{try{await Is(),await e.fetchSystemStatus()}catch(p){console.error(p);return}L.success(t("message.succeed-vacuum-database"))},h=p=>{o({...i,key:p})},v=p=>{o({...i,host:p})},m=async()=>{try{await se({name:"openai-config",value:JSON.stringify(i)})}catch(p){console.error(p);return}L.success("OpenAI Config updated")},b=p=>{n({...r,additionalStyle:p})},u=async()=>{try{await se({name:"additional-style",value:JSON.stringify(r.additionalStyle)})}catch(p){console.error(p);return}L.success(t("message.succeed-update-additional-style"))},w=p=>{n({...r,additionalScript:p})},O=async()=>{try{await se({name:"additional-script",value:JSON.stringify(r.additionalScript)})}catch(p){console.error(p);return}L.success(t("message.succeed-update-additional-script"))},G=async p=>{n({...r,disablePublicMemos:p}),e.setSystemStatus({disablePublicMemos:p}),await se({name:"disable-public-memos",value:JSON.stringify(p)})},X=async p=>{p.target.selectionEnd=p.target.value.length;let x=parseInt(p.target.value);Number.isNaN(x)&&(x=0),n({...r,maxUploadSizeMiB:x}),p.target.value=x.toString(),e.setSystemStatus({maxUploadSizeMiB:x}),await se({name:"max-upload-size-mib",value:JSON.stringify(x)})},J=p=>{p.target.select()};return s.jsxs("div",{className:"section-container system-section-container",children:[s.jsx("p",{className:"title-text",children:t("common.basic")}),s.jsxs("div",{className:"form-label",children:[s.jsxs("div",{className:"normal-text",children:[t("setting.system-section.server-name"),": ",s.jsx("span",{className:"font-mono font-bold",children:a.customizedProfile.name})]}),s.jsx(W,{onClick:g,children:t("common.edit")})]}),s.jsxs("div",{className:"form-label",children:[s.jsxs("span",{className:"text-sm",children:[t("setting.system-section.database-file-size"),": ",s.jsx("span",{className:"font-mono font-bold",children:ks(r.dbSize)})]}),s.jsx(W,{onClick:d,children:t("common.vacuum")})]}),s.jsx("p",{className:"title-text",children:t("common.settings")}),s.jsxs("div",{className:"form-label",children:[s.jsx("span",{className:"normal-text",children:t("setting.system-section.allow-user-signup")}),s.jsx($e,{checked:r.allowSignUp,onChange:p=>l(p.target.checked)})]}),s.jsxs("div",{className:"form-label",children:[s.jsx("span",{className:"normal-text",children:t("setting.system-section.ignore-version-upgrade")}),s.jsx($e,{checked:r.ignoreUpgrade,onChange:p=>c(p.target.checked)})]}),s.jsxs("div",{className:"form-label",children:[s.jsx("span",{className:"normal-text",children:t("setting.system-section.disable-public-memos")}),s.jsx($e,{checked:r.disablePublicMemos,onChange:p=>G(p.target.checked)})]}),s.jsxs("div",{className:"form-label",children:[s.jsxs("div",{className:"flex flex-row items-center",children:[s.jsx("span",{className:"text-sm mr-1",children:t("setting.system-section.max-upload-size")}),s.jsx(be,{icon:"info",hint:t("setting.system-section.max-upload-size-hint")})]}),s.jsx(F,{className:"w-16",sx:{fontFamily:"monospace"},defaultValue:r.maxUploadSizeMiB,onFocus:J,onChange:X})]}),s.jsx(pe,{className:"!mt-3 !my-4"}),s.jsxs("div",{className:"form-label",children:[s.jsxs("div",{className:"flex flex-row items-center",children:[s.jsx("span",{className:"text-sm mr-1",children:t("setting.system-section.openai-api-key")}),s.jsx(be,{hint:t("setting.system-section.openai-api-key-description"),url:"https://platform.openai.com/account/api-keys"})]}),s.jsx(W,{onClick:m,children:t("common.save")})]}),s.jsx(F,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:t("setting.system-section.openai-api-key-placeholder"),value:i.key,onChange:p=>h(p.target.value)}),s.jsx("div",{className:"form-label mt-2",children:s.jsx("span",{className:"normal-text",children:t("setting.system-section.openai-api-host")})}),s.jsx(F,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:t("setting.system-section.openai-api-host-placeholder"),value:i.host,onChange:p=>v(p.target.value)}),s.jsx(pe,{className:"!mt-3 !my-4"}),s.jsxs("div",{className:"form-label",children:[s.jsx("span",{className:"normal-text",children:t("setting.system-section.additional-style")}),s.jsx(W,{onClick:u,children:t("common.save")})]}),s.jsx(lt,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:t("setting.system-section.additional-style-placeholder"),value:r.additionalStyle,onChange:p=>b(p.target.value)}),s.jsxs("div",{className:"form-label mt-2",children:[s.jsx("span",{className:"normal-text",children:t("setting.system-section.additional-script")}),s.jsx(W,{onClick:O,children:t("common.save")})]}),s.jsx(lt,{className:"w-full",color:"neutral",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:t("setting.system-section.additional-script-placeholder"),value:r.additionalScript,onChange:p=>w(p.target.value)})]})},ge=t=>{const{className:e}=t;return s.jsx("span",{className:`mx-0.5 text-red-500 font-bold ${e??""}`,children:"*"})},Ua=t=>{const{t:e}=B(),{destroy:a,storage:r,confirmCallback:n}=t,[i,o]=S.useState({name:""}),[l,c]=S.useState("S3"),[g,d]=S.useState({endPoint:"",region:"",accessKey:"",secretKey:"",path:"",bucket:"",urlPrefix:"",urlSuffix:""}),h=r===void 0;S.useEffect(()=>{r&&(o({name:r.name}),c(r.type),r.type==="S3"&&d(r.config.s3Config))},[]);const v=()=>{a()},m=()=>!(i.name===""||l==="S3"&&(g.endPoint===""||g.region===""||g.accessKey===""||g.secretKey===""||g.bucket==="")),b=async()=>{try{h?await Rs({...i,type:l,config:{s3Config:g}}):await Ts({id:r.id,type:l,...i,config:{s3Config:g}})}catch(w){console.error(w),L.error(w.response.data.message)}n&&n(),a()},u=w=>{d({...g,...w})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx("span",{className:"title-text ml-auto",children:e("setting.storage-section."+(h?"create":"update")+"-storage")}),s.jsx("button",{className:"btn close-btn ml-auto",onClick:v,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("common.name"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("common.name"),value:i.name,onChange:w=>o({...i,name:w.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.storage-section.endpoint"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.s3-compatible-url"),value:g.endPoint,onChange:w=>u({endPoint:w.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.storage-section.region"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.region-placeholder"),value:g.region,onChange:w=>u({region:w.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.storage-section.accesskey"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.accesskey-placeholder"),value:g.accessKey,onChange:w=>u({accessKey:w.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.storage-section.secretkey"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.secretkey-placeholder"),value:g.secretKey,onChange:w=>u({secretKey:w.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.storage-section.bucket"),s.jsx(ge,{})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.bucket-placeholder"),value:g.bucket,onChange:w=>u({bucket:w.target.value}),fullWidth:!0}),s.jsxs("div",{className:"flex flex-row",children:[s.jsx(_,{className:"!mb-1",level:"body2",children:e("setting.storage-section.path")}),s.jsx(be,{text:e("setting.storage-section.path-description"),url:"https://usememos.com/docs/local-storage"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.path-placeholder")+"/{year}/{month}/{filename}",value:g.path,onChange:w=>u({path:w.target.value}),fullWidth:!0}),s.jsx(_,{className:"!mb-1",level:"body2",children:e("setting.storage-section.url-prefix")}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.url-prefix-placeholder"),value:g.urlPrefix,onChange:w=>u({urlPrefix:w.target.value}),fullWidth:!0}),s.jsx(_,{className:"!mb-1",level:"body2",children:e("setting.storage-section.url-suffix")}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.url-suffix-placeholder"),value:g.urlSuffix,onChange:w=>u({urlSuffix:w.target.value}),fullWidth:!0}),s.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[s.jsx(W,{variant:"plain",color:"neutral",onClick:v,children:e("common.cancel")}),s.jsx(W,{onClick:b,disabled:!m(),children:e("common."+(h?"create":"update"))})]})]})]})};function Nt(t,e){Z({className:"create-storage-service-dialog",dialogName:"create-storage-service-dialog"},Ua,{storage:t,confirmCallback:e})}const Fa=t=>{const{t:e}=B(),{destroy:a,localStoragePath:r,confirmCallback:n}=t,i=de(),[o,l]=S.useState(r||""),c=()=>{a()},g=async()=>{try{await se({name:"local-storage-path",value:JSON.stringify(o)}),await i.fetchSystemStatus()}catch(d){console.error(d),L.error(d.response.data.message)}n&&n(),a()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx("p",{className:"title-text",children:e("setting.storage-section.update-local-path")}),s.jsx("button",{className:"btn close-btn",onClick:c,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container max-w-xs",children:[s.jsx("p",{className:"text-sm break-words mb-1",children:e("setting.storage-section.update-local-path-description")}),s.jsxs("div",{className:"flex flex-row",children:[s.jsxs("p",{className:"text-sm text-gray-400 mb-2 break-all",children:[e("common.e.g")," ","assets/{publicid}"]}),s.jsx(be,{hint:e("common.learn-more"),url:"https://usememos.com/docs/local-storage"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.storage-section.local-storage-path"),fullWidth:!0,value:o,onChange:d=>l(d.target.value)}),s.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[s.jsx(W,{variant:"plain",color:"neutral",onClick:c,children:e("common.cancel")}),s.jsx(W,{onClick:g,children:e("common.update")})]})]})]})};function _a(t,e){Z({className:"update-local-storage-dialog",dialogName:"update-local-storage-dialog"},Fa,{localStoragePath:t,confirmCallback:e})}const Ba=()=>{const{t}=B(),e=de(),a=e.state.systemStatus,[r,n]=S.useState(a.storageServiceId),[i,o]=S.useState([]);S.useEffect(()=>{l()},[]);const l=async()=>{const{data:{data:d}}=await As();o(d)},c=async d=>{await se({name:"storage-service-id",value:JSON.stringify(d)}),await e.fetchSystemStatus(),n(d)},g=d=>{Ie({title:t("setting.storage-section.delete-storage"),content:t("setting.storage-section.warning-text",{name:d.name}),style:"warning",dialogName:"delete-storage-dialog",onConfirm:async()=>{try{await Os(d.id)}catch(h){console.error(h),L.error(h.response.data.message)}await l()}})};return s.jsxs("div",{className:"section-container",children:[s.jsx("div",{className:"mt-4 mb-2 w-full flex flex-row justify-start items-center",children:s.jsx("span",{className:"font-mono text-sm text-gray-400 mr-2",children:t("setting.storage-section.current-storage")})}),s.jsxs(we,{className:"w-full mb-4",value:r,onChange:(d,h)=>{c(h??r)},children:[s.jsx(ce,{value:0,children:t("setting.storage-section.type-database")}),s.jsx(ce,{value:-1,children:t("setting.storage-section.type-local")}),i.map(d=>s.jsx(ce,{value:d.id,children:d.name},d.id))]}),s.jsx(pe,{}),s.jsxs("div",{className:"mt-4 mb-2 w-full flex flex-row justify-start items-center gap-1",children:[s.jsx("span",{className:"font-mono text-sm text-gray-400",children:t("setting.storage-section.storage-services-list")}),s.jsx(be,{className:"btn",icon:"info",url:"https://usememos.com/docs/storage"}),s.jsx("button",{className:"btn-normal px-2 py-0 ml-1",onClick:()=>Nt(void 0,l),children:t("common.create")})]}),s.jsxs("div",{className:"mt-2 w-full flex flex-col",children:[s.jsxs("div",{className:r!==-1?"hidden":"py-2 w-full border-t dark:border-zinc-700 flex flex-row items-center justify-between",children:[s.jsx("div",{className:"flex flex-row items-center",children:s.jsx("p",{className:"ml-2",children:t("setting.storage-section.type-local")})}),s.jsx("div",{className:"flex flex-row items-center",children:s.jsx(Re,{actionsClassName:"!w-28",actions:s.jsx(s.Fragment,{children:s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>_a(a.localStoragePath),children:t("common.edit")})})})})]}),i.map(d=>s.jsxs("div",{className:"py-2 w-full border-t last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[s.jsx("div",{className:"flex flex-row items-center",children:s.jsx("p",{className:"ml-2",children:d.name})}),s.jsx("div",{className:"flex flex-row items-center",children:s.jsx(Re,{actionsClassName:"!w-28",actions:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>Nt(d,l),children:t("common.edit")}),s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded text-red-600 hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>g(d),children:t("common.delete")})]})})})]},d.id))]})]})},Ha=t=>{const{t:e}=B(),a=[{id:Ae,name:"GitHub",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://github.com/login/oauth/authorize",tokenUrl:"https://github.com/login/oauth/access_token",userInfoUrl:"https://api.github.com/user",scopes:["user"],fieldMapping:{identifier:e("setting.sso-section.identifier"),displayName:"",email:""}}}},{id:Ae,name:"GitLab",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://gitlab.com/oauth/authorize",tokenUrl:"https://gitlab.com/oauth/token",userInfoUrl:"https://gitlab.com/oauth/userinfo",scopes:["openid"],fieldMapping:{identifier:e("setting.sso-section.identifier"),displayName:"",email:""}}}},{id:Ae,name:"Google",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",userInfoUrl:"https://www.googleapis.com/oauth2/v2/userinfo",scopes:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"],fieldMapping:{identifier:e("setting.sso-section.identifier"),displayName:"",email:""}}}},{id:Ae,name:e("setting.sso-section.custom"),type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}}}],r=[...new Set(a.map(x=>x.type))],{confirmCallback:n,destroy:i,identityProvider:o}=t,[l,c]=S.useState({name:"",identifierFilter:""}),[g,d]=S.useState("OAUTH2"),[h,v]=S.useState({clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}),[m,b]=S.useState(""),[u,w]=S.useState("GitHub"),O=o===void 0;S.useEffect(()=>{o&&(c({name:o.name,identifierFilter:o.identifierFilter}),d(o.type),o.type==="OAUTH2"&&(v(o.config.oauth2Config),b(o.config.oauth2Config.scopes.join(" "))))},[]),S.useEffect(()=>{if(!O)return;const x=a.find(T=>T.name===u);x&&(c({name:x.name,identifierFilter:x.identifierFilter}),d(x.type),x.type==="OAUTH2"&&(v(x.config.oauth2Config),b(x.config.oauth2Config.scopes.join(" "))))},[u]);const G=()=>{i()},X=()=>!(l.name===""||g==="OAUTH2"&&(h.clientId===""||h.clientSecret===""||h.authUrl===""||h.tokenUrl===""||h.userInfoUrl===""||m===""||h.fieldMapping.identifier==="")),J=async()=>{try{O?(await Ps({...l,type:g,config:{oauth2Config:{...h,scopes:m.split(" ")}}}),L.success(e("setting.sso-section.sso-created",{name:l.name}))):(await zs({id:o.id,type:g,...l,config:{oauth2Config:{...h,scopes:m.split(" ")}}}),L.success(e("setting.sso-section.sso-updated",{name:l.name})))}catch(x){console.error(x),L.error(x.response.data.message)}n&&n(),i()},p=x=>{v({...h,...x})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx("p",{className:"title-text ml-auto",children:e("setting.sso-section."+(O?"create":"update")+"-sso")}),s.jsx("button",{className:"btn close-btn ml-auto",onClick:G,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[O&&s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"!mb-1",level:"body2",children:e("common.type")}),s.jsx(we,{className:"w-full mb-4",value:g,onChange:(x,T)=>d(T??g),children:r.map(x=>s.jsx(ce,{value:x,children:x},x))}),s.jsx(_,{className:"mb-2",level:"body2",children:e("setting.sso-section.template")}),s.jsx(we,{className:"mb-1 h-auto w-full",value:u,onChange:(x,T)=>w(T??u),children:a.map(x=>s.jsx(ce,{value:x.name,children:x.name},x.name))}),s.jsx(pe,{className:"!my-2"})]}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("common.name"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("common.name"),value:l.name,onChange:x=>c({...l,name:x.target.value}),fullWidth:!0}),s.jsx(_,{className:"!mb-1",level:"body2",children:e("setting.sso-section.identifier-filter")}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.identifier-filter"),value:l.identifierFilter,onChange:x=>c({...l,identifierFilter:x.target.value}),fullWidth:!0}),s.jsx(pe,{className:"!my-2"}),g==="OAUTH2"&&s.jsxs(s.Fragment,{children:[O&&s.jsxs("p",{className:"border rounded-md p-2 text-sm w-full mb-2 break-all",children:[e("setting.sso-section.redirect-url"),": ",Ls("/auth/callback")]}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.client-id"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.client-id"),value:h.clientId,onChange:x=>p({clientId:x.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.client-secret"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.client-secret"),value:h.clientSecret,onChange:x=>p({clientSecret:x.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.authorization-endpoint"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.authorization-endpoint"),value:h.authUrl,onChange:x=>p({authUrl:x.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.token-endpoint"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.token-endpoint"),value:h.tokenUrl,onChange:x=>p({tokenUrl:x.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.user-endpoint"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.user-endpoint"),value:h.userInfoUrl,onChange:x=>p({userInfoUrl:x.target.value}),fullWidth:!0}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.scopes"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.scopes"),value:m,onChange:x=>b(x.target.value),fullWidth:!0}),s.jsx(pe,{className:"!my-2"}),s.jsxs(_,{className:"!mb-1",level:"body2",children:[e("setting.sso-section.identifier"),s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.identifier"),value:h.fieldMapping.identifier,onChange:x=>p({fieldMapping:{...h.fieldMapping,identifier:x.target.value}}),fullWidth:!0}),s.jsx(_,{className:"!mb-1",level:"body2",children:e("setting.sso-section.display-name")}),s.jsx(F,{className:"mb-2",placeholder:e("setting.sso-section.display-name"),value:h.fieldMapping.displayName,onChange:x=>p({fieldMapping:{...h.fieldMapping,displayName:x.target.value}}),fullWidth:!0}),s.jsx(_,{className:"!mb-1",level:"body2",children:e("common.email")}),s.jsx(F,{className:"mb-2",placeholder:e("common.email"),value:h.fieldMapping.email,onChange:x=>p({fieldMapping:{...h.fieldMapping,email:x.target.value}}),fullWidth:!0})]}),s.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[s.jsx(W,{variant:"plain",color:"neutral",onClick:G,children:e("common.cancel")}),s.jsx(W,{onClick:J,disabled:!X(),children:e("common."+(O?"create":"update"))})]})]})]})};function jt(t,e){Z({className:"create-identity-provider-dialog",dialogName:"create-identity-provider-dialog"},Ha,{identityProvider:t,confirmCallback:e})}const Ma=()=>{const{t}=B(),[e,a]=S.useState([]);S.useEffect(()=>{r()},[]);const r=async()=>{const{data:{data:i}}=await Ds();a(i)},n=async i=>{Ie({title:t("setting.sso-section.delete-sso"),content:t("setting.sso-section.confirm-delete",{name:i.name}),style:"warning",dialogName:"delete-identity-provider-dialog",onConfirm:async()=>{try{await Us(i.id)}catch(o){console.error(o),L.error(o.response.data.message)}await r()}})};return s.jsxs("div",{className:"section-container",children:[s.jsxs("div",{className:"mb-2 w-full flex flex-row justify-start items-center gap-1",children:[s.jsx("span",{className:"font-mono text-sm text-gray-400",children:t("setting.sso-section.sso-list")}),s.jsx(be,{icon:"help",url:"https://usememos.com/docs/keycloak"}),s.jsx("button",{className:"btn-normal px-2 py-0 ml-1",onClick:()=>jt(void 0,r),children:t("common.create")})]}),s.jsx(pe,{}),e.map(i=>s.jsxs("div",{className:"py-2 w-full border-t last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[s.jsx("div",{className:"flex flex-row items-center",children:s.jsxs("p",{className:"ml-2",children:[i.name,s.jsxs("span",{className:"text-sm ml-1 opacity-40",children:["(",i.type,")"]})]})}),s.jsx("div",{className:"flex flex-row items-center",children:s.jsx(Re,{actionsClassName:"!w-28",actions:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>jt(i,r),children:t("common.edit")}),s.jsx("button",{className:"w-full text-left text-sm leading-6 py-1 px-3 cursor-pointer rounded text-red-600 hover:bg-gray-100 dark:hover:bg-zinc-600",onClick:()=>n(i),children:t("common.delete")})]})})})]},i.id))]})};const Va=t=>{const{destroy:e,selectedSection:a}=t,{t:r}=B(),i=oe().state.user,[o,l]=S.useState({selectedSection:a||"my-account"}),c=(i==null?void 0:i.role)==="HOST",g=h=>{l({selectedSection:h})},d=()=>{let h=["my-account","preference"];return c&&(h=h.concat(["member","system","storage","sso"])),h};return s.jsxs("div",{className:"dialog-content-container",children:[s.jsx("button",{className:"btn close-btn",onClick:e,children:s.jsx(I.X,{className:"icon-img"})}),s.jsxs("div",{className:"section-selector-container",children:[s.jsx("span",{className:"section-title",children:r("common.basic")}),s.jsxs("div",{className:"section-items-container",children:[s.jsxs("span",{onClick:()=>g("my-account"),className:`section-item ${o.selectedSection==="my-account"?"selected":""}`,children:[s.jsx(I.User,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.my-account")]}),s.jsxs("span",{onClick:()=>g("preference"),className:`section-item ${o.selectedSection==="preference"?"selected":""}`,children:[s.jsx(I.Cog,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.preference")]})]}),c?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"section-title",children:r("common.admin")}),s.jsxs("div",{className:"section-items-container",children:[s.jsxs("span",{onClick:()=>g("member"),className:`section-item ${o.selectedSection==="member"?"selected":""}`,children:[s.jsx(I.Users,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.member")]}),s.jsxs("span",{onClick:()=>g("system"),className:`section-item ${o.selectedSection==="system"?"selected":""}`,children:[s.jsx(I.Settings2,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.system")]}),s.jsxs("span",{onClick:()=>g("storage"),className:`section-item ${o.selectedSection==="storage"?"selected":""}`,children:[s.jsx(I.Database,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.storage")," ",s.jsx(bt,{})]}),s.jsxs("span",{onClick:()=>g("sso"),className:`section-item ${o.selectedSection==="sso"?"selected":""}`,children:[s.jsx(I.Key,{className:"w-4 h-auto mr-2 opacity-80"})," ",r("setting.sso")," ",s.jsx(bt,{})]})]})]}):null]}),s.jsxs("div",{className:"section-content-container",children:[s.jsx(we,{className:"block sm:!hidden",value:o.selectedSection,onChange:(h,v)=>g(v),children:d().map(h=>s.jsx(ce,{value:h,children:r(`setting.${h}`)},h))}),o.selectedSection==="my-account"?s.jsx(ka,{}):o.selectedSection==="preference"?s.jsx(Ia,{}):o.selectedSection==="member"?s.jsx(Aa,{}):o.selectedSection==="system"?s.jsx(Da,{}):o.selectedSection==="storage"?s.jsx(Ba,{}):o.selectedSection==="sso"?s.jsx(Ma,{}):null]})]})};function as(t){Z({className:"setting-dialog",dialogName:"setting-dialog"},Va,{selectedSection:t})}const Ga=t=>{const{memo:e}=t,{t:a}=B(),r=Qt(),[n,i]=Fs(!1),o=async()=>{if(n)try{await r.deleteMemoById(e.id)}catch(g){console.error(g),L.error(g.response.data.message)}else i()},l=async()=>{try{await r.patchMemo({id:e.id,rowStatus:"NORMAL"}),await r.fetchMemos(),L(a("message.restored-successfully"))}catch(g){console.error(g),L.error(g.response.data.message)}},c=()=>{n&&i(!1)};return s.jsxs("div",{className:`memo-wrapper archived ${"memos-"+e.id}`,onMouseLeave:c,children:[s.jsxs("div",{className:"memo-top-wrapper",children:[s.jsxs("span",{className:"time-text",children:[a("memo.archived-at")," ",_s(e.updatedTs)]}),s.jsxs("div",{className:"btns-container",children:[s.jsx("span",{className:"btn-text",onClick:l,children:a("common.restore")}),s.jsxs("span",{className:`btn-text ${n?"final-confirm":""}`,onClick:o,children:[a("common.delete"),n?"!":""]})]})]}),s.jsx(Bs,{content:e.content}),s.jsx(Hs,{resourceList:e.resourceList})]})};const Wa=t=>{const{t:e}=B(),{destroy:a}=t,r=Qt(),n=r.state.memos,i=Ms(),[o,l]=S.useState([]);return S.useEffect(()=>{r.fetchArchivedMemos().then(c=>{l(c)}).catch(c=>{console.error(c),L.error(c.response.data.message)}).finally(()=>{i.setFinish()})},[n]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsx("p",{className:"title-text",children:e("memo.archived-memos")}),s.jsx("button",{className:"btn close-btn",onClick:a,children:s.jsx(I.X,{className:"icon-img"})})]}),s.jsx("div",{className:"dialog-content-container",children:i.isLoading?s.jsx("div",{className:"tip-text-container",children:s.jsx("p",{className:"tip-text",children:e("memo.fetching-data")})}):o.length===0?s.jsx("div",{className:"tip-text-container",children:s.jsx("p",{className:"tip-text",children:e("memo.no-archived-memos")})}):s.jsx("div",{className:"archived-memos-container",children:o.map(c=>s.jsx(Ga,{memo:c},`${c.id}-${c.updatedTs}`))})})]})};function Xa(){Z({className:"archived-memo-dialog",dialogName:"archived-memo-dialog"},Wa,{})}const Ja=()=>{const[t,e]=S.useState(0);return S.useEffect(()=>{Vs().then(a=>{e(a)})},[]),s.jsxs("a",{className:"h-7 flex flex-row justify-start items-center border dark:border-zinc-600 rounded cursor-pointer hover:opacity-80",href:"https://github.com/usememos/memos",target:"_blank",children:[s.jsxs("div",{className:"apply w-auto h-full px-2 flex flex-row justify-center items-center text-xs bg-gray-100 dark:bg-zinc-700",children:[s.jsx(I.Github,{className:"mr-1 w-4 h-4"}),"Star"]}),s.jsx("div",{className:"w-auto h-full flex flex-row justify-center items-center px-3 text-xs font-bold",children:t||""})]})},qa=({destroy:t})=>{const{t:e}=B(),a=de(),r=a.state.systemStatus.profile,n=a.state.systemStatus.customizedProfile,i=()=>{t()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dialog-header-container",children:[s.jsxs("p",{className:"title-text flex items-center",children:[e("common.about")," ",n.name]}),s.jsx("button",{className:"btn close-btn",onClick:i,children:s.jsx(I.X,{})})]}),s.jsxs("div",{className:"flex flex-col justify-start items-start max-w-full w-96",children:[s.jsx("p",{className:"text-xs",children:e("about.memos-description")}),s.jsx("p",{className:"text-sm mt-2 ",children:n.description||e("about.no-server-description")}),s.jsxs("div",{className:"mt-4 w-full flex flex-row text-sm justify-start items-center",children:[s.jsxs("div",{className:"flex flex-row justify-start items-center mr-2",children:[e("about.powered-by"),s.jsxs("a",{href:"https://usememos.com",target:"_blank",className:"flex flex-row justify-start items-center mx-1 hover:underline",children:[s.jsx("img",{className:"w-6 h-auto rounded-full mr-1",src:"/logo.webp",alt:""}),"memos"]}),s.jsxs("span",{children:["v",r.version]})]}),s.jsx(Ja,{})]}),s.jsxs("div",{className:"border-t w-full mt-3 pt-2 text-sm flex flex-row justify-start items-center space-x-2",children:[s.jsxs("span",{className:"text-gray-500",children:[e("about.other-projects"),":"]}),s.jsxs("a",{href:"https://github.com/boojack/sticky-notes",target:"_blank",className:"flex items-center underline text-blue-600 hover:opacity-80",children:[s.jsx("img",{className:"w-4 h-auto mr-1",src:"https://raw.githubusercontent.com/boojack/sticky-notes/main/public/sticky-notes.ico",alt:""}),s.jsx("span",{children:"Sticky notes"})]}),s.jsxs("a",{href:"https://star-history.com",target:"_blank",className:"flex items-center underline text-blue-600 hover:opacity-80",children:[s.jsx("img",{className:"w-4 h-auto mr-1",src:"https://star-history.com/icon.png",alt:""}),s.jsx("span",{children:"Star history"})]})]})]})]})};function Ya(){Z({className:"about-site-dialog",dialogName:"about-site-dialog"},qa)}const Ka=()=>{const{t}=B(),e=de(),a=oe(),{systemStatus:r}=e.state,{user:n}=a.state,[i,o]=S.useState("Memos");S.useEffect(()=>{n&&o(n.nickname||n.username)},[n]);const l=()=>{as("my-account")},c=()=>{Ya()},g=async()=>{await a.doSignOut(),window.location.href="/auth"};return s.jsx("div",{className:"flex flex-row justify-between items-center relative w-full h-auto px-2 flex-nowrap shrink-0",children:s.jsx(Re,{className:"w-full",trigger:s.jsxs("div",{className:"px-3 py-2 max-w-full flex flex-row justify-start items-center cursor-pointer rounded-lg hover:shadow hover:bg-white dark:hover:bg-zinc-700",children:[s.jsx(dt,{avatarUrl:n==null?void 0:n.avatarUrl}),s.jsx("span",{className:"px-1 text-lg font-medium text-slate-800 dark:text-gray-200 shrink truncate",children:a.isVisitorMode()?r.customizedProfile.name:i}),(n==null?void 0:n.role)==="HOST"?s.jsx("span",{className:"text-xs px-1 bg-blue-600 dark:bg-blue-800 rounded text-white dark:text-gray-200 shadow",children:"MOD"}):null]}),actionsClassName:"min-w-[128px] max-w-full",positionClassName:"top-full mt-2",actions:s.jsxs(s.Fragment,{children:[!a.isVisitorMode()&&s.jsx(s.Fragment,{children:s.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:l,children:[s.jsx(I.User,{className:"w-5 h-auto mr-2 opacity-80"})," ",t("setting.my-account")]})}),s.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:c,children:[s.jsx(I.Info,{className:"w-5 h-auto mr-2 opacity-80"})," ",t("common.about")]}),!a.isVisitorMode()&&s.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:g,children:[s.jsx(I.LogOut,{className:"w-5 h-auto mr-2 opacity-80"})," ",t("common.sign-out")]})]})})})},Za=()=>{const{t}=B(),e=Gs(),a=oe(),r=Ws(),n=r.state.showHeader,i=a.isVisitorMode()&&!a.state.user;return S.useEffect(()=>{const o=()=>{window.innerWidth<ja.sm?r.setHeaderStatus(!1):r.setHeaderStatus(!0)};window.addEventListener("resize",o),o()},[e]),s.jsxs("div",{className:`fixed sm:sticky top-0 left-0 w-full sm:w-56 h-full shrink-0 pointer-events-none sm:pointer-events-auto z-10 ${n&&"pointer-events-auto"}`,children:[s.jsx("div",{className:`fixed top-0 left-0 w-full h-full bg-black opacity-0 pointer-events-none transition-opacity duration-300 sm:!hidden ${n&&"opacity-60 pointer-events-auto"}`,onClick:()=>r.setHeaderStatus(!1)}),s.jsxs("header",{className:`relative w-56 sm:w-full h-full max-h-screen overflow-auto hide-scrollbar flex flex-col justify-start items-start py-4 z-30 bg-zinc-100 dark:bg-zinc-800 sm:bg-transparent sm:shadow-none transition-all duration-300 -translate-x-full sm:translate-x-0 ${n&&"translate-x-0 shadow-2xl"}`,children:[s.jsx(Ka,{}),s.jsxs("div",{className:"w-full px-2 py-2 flex flex-col justify-start items-start shrink-0 space-y-2",children:[!i&&s.jsxs(s.Fragment,{children:[s.jsx(je,{to:"/",id:"header-home",className:({isActive:o})=>`${o&&"bg-white dark:bg-zinc-700 shadow"} px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700`,children:s.jsxs(s.Fragment,{children:[s.jsx(I.Home,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.home")]})}),s.jsx(je,{to:"/review",id:"header-review",className:({isActive:o})=>`${o&&"bg-white dark:bg-zinc-700 shadow"} px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700`,children:s.jsxs(s.Fragment,{children:[s.jsx(I.Calendar,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("daily-review.title")]})}),s.jsx(je,{to:"/resources",id:"header-resources",className:({isActive:o})=>`${o&&"bg-white dark:bg-zinc-700 shadow"} px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700`,children:s.jsxs(s.Fragment,{children:[s.jsx(I.Paperclip,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.resources")]})})]}),s.jsx(je,{to:"/explore",id:"header-explore",className:({isActive:o})=>`${o&&"bg-white dark:bg-zinc-700 shadow"} px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700`,children:s.jsxs(s.Fragment,{children:[s.jsx(I.Hash,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.explore")]})}),!i&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{id:"header-archived-memo",className:"px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700",onClick:()=>Xa(),children:[s.jsx(I.Archive,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.archived")]}),s.jsxs("button",{id:"header-settings",className:"px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700",onClick:()=>as(),children:[s.jsx(I.Settings,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.settings")]})]}),i&&s.jsx(s.Fragment,{children:s.jsx(je,{to:"/auth",id:"header-auth",className:({isActive:o})=>`${o&&"bg-white dark:bg-zinc-700 shadow"} px-4 pr-5 py-2 rounded-lg flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:shadow dark:hover:bg-zinc-700`,children:s.jsxs(s.Fragment,{children:[s.jsx(I.LogIn,{className:"mr-3 w-6 h-auto opacity-70"})," ",t("common.sign-in")]})})})]})]}),s.jsxs("div",{className:"chencd97-home-footer",children:[s.jsxs("p",{children:[" 2023 ",s.jsx("a",{href:"/",children:"chencd97"})]}),s.jsxs("p",{children:["Powered by ",s.jsx("a",{href:"https://github.com/usememos/memos",children:"Memos"})]}),s.jsxs("p",{children:["DDoS protection by ",s.jsx("a",{href:"https://www.cloudflare.com",children:"Cloudflare"})]}),s.jsx("br",{}),s.jsxs("p",{id:"hitokotoStr",title:"30, , ",children:["",s.jsx("a",{href:"https://hitokoto.cn/",children:""}),"..."]})]})]})};var ie={},Qa={get exports(){return ie},set exports(t){ie=t}};const er="2.0.0",tr=256,sr=Number.MAX_SAFE_INTEGER||9007199254740991,ar=16;var He={SEMVER_SPEC_VERSION:er,MAX_LENGTH:tr,MAX_SAFE_INTEGER:sr,MAX_SAFE_COMPONENT_LENGTH:ar};const rr=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Me=rr;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:a}=He,r=Me;e=t.exports={};const n=e.re=[],i=e.src=[],o=e.t={};let l=0;const c=(g,d,h)=>{const v=l++;r(g,v,d),o[g]=v,i[v]=d,n[v]=new RegExp(d,h?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\.${i[o.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${i[o.BUILDIDENTIFIER]}(?:\\.${i[o.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),c("FULL",`^${i[o.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),c("LOOSE",`^${i[o.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[o.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?)?)?`),c("XRANGE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),c("COERCERTL",i[o.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[o.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",c("TILDE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[o.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",c("CARET",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[o.GTLT]}\\s*(${i[o.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[o.XRANGEPLAIN]})\\s+-\\s+(${i[o.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${i[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[o.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Qa,ie);const nr=["includePrerelease","loose","rtl"],ir=t=>t?typeof t!="object"?{loose:!0}:nr.filter(e=>t[e]).reduce((e,a)=>(e[a]=!0,e),{}):{};var Ve=ir;const St=/^[0-9]+$/,rs=(t,e)=>{const a=St.test(t),r=St.test(e);return a&&r&&(t=+t,e=+e),t===e?0:a&&!r?-1:r&&!a?1:t<e?-1:1},or=(t,e)=>rs(e,t);var ns={compareIdentifiers:rs,rcompareIdentifiers:or};const Pe=Me,{MAX_LENGTH:Ct,MAX_SAFE_INTEGER:ze}=He,{re:Et,t:$t}=ie,lr=Ve,{compareIdentifiers:xe}=ns;let cr=class te{constructor(e,a){if(a=lr(a),e instanceof te){if(e.loose===!!a.loose&&e.includePrerelease===!!a.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ct)throw new TypeError(`version is longer than ${Ct} characters`);Pe("SemVer",e,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const r=e.trim().match(a.loose?Et[$t.LOOSE]:Et[$t.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ze||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ze||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ze||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const i=+n;if(i>=0&&i<ze)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Pe("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),xe(this.major,e.major)||xe(this.minor,e.minor)||xe(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let a=0;do{const r=this.prerelease[a],n=e.prerelease[a];if(Pe("prerelease compare",a,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return xe(r,n)}while(++a)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let a=0;do{const r=this.build[a],n=e.build[a];if(Pe("prerelease compare",a,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return xe(r,n)}while(++a)}inc(e,a){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a),this.inc("pre",a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a),this.inc("pre",a);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}a&&(xe(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=[a,0]):this.prerelease=[a,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var V=cr;const{MAX_LENGTH:dr}=He,{re:kt,t:It}=ie,Rt=V,hr=Ve,mr=(t,e)=>{if(e=hr(e),t instanceof Rt)return t;if(typeof t!="string"||t.length>dr||!(e.loose?kt[It.LOOSE]:kt[It.FULL]).test(t))return null;try{return new Rt(t,e)}catch{return null}};var Ne=mr;const ur=Ne,pr=(t,e)=>{const a=ur(t,e);return a?a.version:null};var fr=pr;const gr=Ne,xr=(t,e)=>{const a=gr(t.trim().replace(/^[=v]+/,""),e);return a?a.version:null};var vr=xr;const Tt=V,yr=(t,e,a,r)=>{typeof a=="string"&&(r=a,a=void 0);try{return new Tt(t instanceof Tt?t.version:t,a).inc(e,r).version}catch{return null}};var wr=yr;const At=V,br=(t,e,a)=>new At(t,a).compare(new At(e,a));var Q=br;const Nr=Q,jr=(t,e,a)=>Nr(t,e,a)===0;var ht=jr;const Ot=Ne,Sr=ht,Cr=(t,e)=>{if(Sr(t,e))return null;{const a=Ot(t),r=Ot(e),n=a.prerelease.length||r.prerelease.length,i=n?"pre":"",o=n?"prerelease":"";for(const l in a)if((l==="major"||l==="minor"||l==="patch")&&a[l]!==r[l])return i+l;return o}};var Er=Cr;const $r=V,kr=(t,e)=>new $r(t,e).major;var Ir=kr;const Rr=V,Tr=(t,e)=>new Rr(t,e).minor;var Ar=Tr;const Or=V,Lr=(t,e)=>new Or(t,e).patch;var Pr=Lr;const zr=Ne,Dr=(t,e)=>{const a=zr(t,e);return a&&a.prerelease.length?a.prerelease:null};var Ur=Dr;const Fr=Q,_r=(t,e,a)=>Fr(e,t,a);var Br=_r;const Hr=Q,Mr=(t,e)=>Hr(t,e,!0);var Vr=Mr;const Lt=V,Gr=(t,e,a)=>{const r=new Lt(t,a),n=new Lt(e,a);return r.compare(n)||r.compareBuild(n)};var mt=Gr;const Wr=mt,Xr=(t,e)=>t.sort((a,r)=>Wr(a,r,e));var Jr=Xr;const qr=mt,Yr=(t,e)=>t.sort((a,r)=>qr(r,a,e));var Kr=Yr;const Zr=Q,Qr=(t,e,a)=>Zr(t,e,a)>0;var Ge=Qr;const en=Q,tn=(t,e,a)=>en(t,e,a)<0;var ut=tn;const sn=Q,an=(t,e,a)=>sn(t,e,a)!==0;var is=an;const rn=Q,nn=(t,e,a)=>rn(t,e,a)>=0;var pt=nn;const on=Q,ln=(t,e,a)=>on(t,e,a)<=0;var ft=ln;const cn=ht,dn=is,hn=Ge,mn=pt,un=ut,pn=ft,fn=(t,e,a,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof a=="object"&&(a=a.version),t===a;case"!==":return typeof t=="object"&&(t=t.version),typeof a=="object"&&(a=a.version),t!==a;case"":case"=":case"==":return cn(t,a,r);case"!=":return dn(t,a,r);case">":return hn(t,a,r);case">=":return mn(t,a,r);case"<":return un(t,a,r);case"<=":return pn(t,a,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var os=fn;const gn=V,xn=Ne,{re:De,t:Ue}=ie,vn=(t,e)=>{if(t instanceof gn)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let a=null;if(!e.rtl)a=t.match(De[Ue.COERCE]);else{let r;for(;(r=De[Ue.COERCERTL].exec(t))&&(!a||a.index+a[0].length!==t.length);)(!a||r.index+r[0].length!==a.index+a[0].length)&&(a=r),De[Ue.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;De[Ue.COERCERTL].lastIndex=-1}return a===null?null:xn(`${a[2]}.${a[3]||"0"}.${a[4]||"0"}`,e)};var yn=vn,Qe,Pt;function wn(){return Pt||(Pt=1,Qe=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Qe}var bn=P;P.Node=fe;P.create=P;function P(t){var e=this;if(e instanceof P||(e=new P),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var a=0,r=arguments.length;a<r;a++)e.push(arguments[a]);return e}P.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,a=t.prev;return e&&(e.prev=a),a&&(a.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=a),t.list.length--,t.next=null,t.prev=null,t.list=null,e};P.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};P.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};P.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)jn(this,arguments[t]);return this.length};P.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Sn(this,arguments[t]);return this.length};P.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};P.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};P.prototype.forEach=function(t,e){e=e||this;for(var a=this.head,r=0;a!==null;r++)t.call(e,a.value,r,this),a=a.next};P.prototype.forEachReverse=function(t,e){e=e||this;for(var a=this.tail,r=this.length-1;a!==null;r--)t.call(e,a.value,r,this),a=a.prev};P.prototype.get=function(t){for(var e=0,a=this.head;a!==null&&e<t;e++)a=a.next;if(e===t&&a!==null)return a.value};P.prototype.getReverse=function(t){for(var e=0,a=this.tail;a!==null&&e<t;e++)a=a.prev;if(e===t&&a!==null)return a.value};P.prototype.map=function(t,e){e=e||this;for(var a=new P,r=this.head;r!==null;)a.push(t.call(e,r.value,this)),r=r.next;return a};P.prototype.mapReverse=function(t,e){e=e||this;for(var a=new P,r=this.tail;r!==null;)a.push(t.call(e,r.value,this)),r=r.prev;return a};P.prototype.reduce=function(t,e){var a,r=this.head;if(arguments.length>1)a=e;else if(this.head)r=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)a=t(a,r.value,n),r=r.next;return a};P.prototype.reduceReverse=function(t,e){var a,r=this.tail;if(arguments.length>1)a=e;else if(this.tail)r=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)a=t(a,r.value,n),r=r.prev;return a};P.prototype.toArray=function(){for(var t=new Array(this.length),e=0,a=this.head;a!==null;e++)t[e]=a.value,a=a.next;return t};P.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,a=this.tail;a!==null;e++)t[e]=a.value,a=a.prev;return t};P.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var a=new P;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(;n!==null&&r<e;r++,n=n.next)a.push(n.value);return a};P.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var a=new P;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,n=this.tail;n!==null&&r>e;r--)n=n.prev;for(;n!==null&&r>t;r--,n=n.prev)a.push(n.value);return a};P.prototype.splice=function(t,e,...a){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(var i=[],r=0;n&&r<e;r++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<a.length;r++)n=Nn(this,n,a[r]);return i};P.prototype.reverse=function(){for(var t=this.head,e=this.tail,a=t;a!==null;a=a.prev){var r=a.prev;a.prev=a.next,a.next=r}return this.head=e,this.tail=t,this};function Nn(t,e,a){var r=e===t.head?new fe(a,null,e,t):new fe(a,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function jn(t,e){t.tail=new fe(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Sn(t,e){t.head=new fe(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function fe(t,e,a,r){if(!(this instanceof fe))return new fe(t,e,a,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{wn()(P)}catch{}const Cn=bn,me=Symbol("max"),ne=Symbol("length"),ve=Symbol("lengthCalculator"),ke=Symbol("allowStale"),ue=Symbol("maxAge"),re=Symbol("dispose"),zt=Symbol("noDisposeOnSet"),H=Symbol("lruList"),q=Symbol("cache"),ls=Symbol("updateAgeOnGet"),et=()=>1;class En{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[me]=e.max||1/0;const a=e.length||et;if(this[ve]=typeof a!="function"?et:a,this[ke]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ue]=e.maxAge||0,this[re]=e.dispose,this[zt]=e.noDisposeOnSet||!1,this[ls]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[me]=e||1/0,Se(this)}get max(){return this[me]}set allowStale(e){this[ke]=!!e}get allowStale(){return this[ke]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ue]=e,Se(this)}get maxAge(){return this[ue]}set lengthCalculator(e){typeof e!="function"&&(e=et),e!==this[ve]&&(this[ve]=e,this[ne]=0,this[H].forEach(a=>{a.length=this[ve](a.value,a.key),this[ne]+=a.length})),Se(this)}get lengthCalculator(){return this[ve]}get length(){return this[ne]}get itemCount(){return this[H].length}rforEach(e,a){a=a||this;for(let r=this[H].tail;r!==null;){const n=r.prev;Dt(this,e,r,a),r=n}}forEach(e,a){a=a||this;for(let r=this[H].head;r!==null;){const n=r.next;Dt(this,e,r,a),r=n}}keys(){return this[H].toArray().map(e=>e.key)}values(){return this[H].toArray().map(e=>e.value)}reset(){this[re]&&this[H]&&this[H].length&&this[H].forEach(e=>this[re](e.key,e.value)),this[q]=new Map,this[H]=new Cn,this[ne]=0}dump(){return this[H].map(e=>Be(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[H]}set(e,a,r){if(r=r||this[ue],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const n=r?Date.now():0,i=this[ve](a,e);if(this[q].has(e)){if(i>this[me])return ye(this,this[q].get(e)),!1;const c=this[q].get(e).value;return this[re]&&(this[zt]||this[re](e,c.value)),c.now=n,c.maxAge=r,c.value=a,this[ne]+=i-c.length,c.length=i,this.get(e),Se(this),!0}const o=new $n(e,a,i,n,r);return o.length>this[me]?(this[re]&&this[re](e,a),!1):(this[ne]+=o.length,this[H].unshift(o),this[q].set(e,this[H].head),Se(this),!0)}has(e){if(!this[q].has(e))return!1;const a=this[q].get(e).value;return!Be(this,a)}get(e){return tt(this,e,!0)}peek(e){return tt(this,e,!1)}pop(){const e=this[H].tail;return e?(ye(this,e),e.value):null}del(e){ye(this,this[q].get(e))}load(e){this.reset();const a=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(i===0)this.set(n.k,n.v);else{const o=i-a;o>0&&this.set(n.k,n.v,o)}}}prune(){this[q].forEach((e,a)=>tt(this,a,!1))}}const tt=(t,e,a)=>{const r=t[q].get(e);if(r){const n=r.value;if(Be(t,n)){if(ye(t,r),!t[ke])return}else a&&(t[ls]&&(r.value.now=Date.now()),t[H].unshiftNode(r));return n.value}},Be=(t,e)=>{if(!e||!e.maxAge&&!t[ue])return!1;const a=Date.now()-e.now;return e.maxAge?a>e.maxAge:t[ue]&&a>t[ue]},Se=t=>{if(t[ne]>t[me])for(let e=t[H].tail;t[ne]>t[me]&&e!==null;){const a=e.prev;ye(t,e),e=a}},ye=(t,e)=>{if(e){const a=e.value;t[re]&&t[re](a.key,a.value),t[ne]-=a.length,t[q].delete(a.key),t[H].removeNode(e)}};class $n{constructor(e,a,r,n,i){this.key=e,this.value=a,this.length=r,this.now=n,this.maxAge=i||0}}const Dt=(t,e,a,r)=>{let n=a.value;Be(t,n)&&(ye(t,a),t[ke]||(n=void 0)),n&&e.call(r,n.value,n.key,t)};var kn=En,st,Ut;function ee(){if(Ut)return st;Ut=1;class t{constructor(f,E){if(E=r(E),f instanceof t)return f.loose===!!E.loose&&f.includePrerelease===!!E.includePrerelease?f:new t(f.raw,E);if(f instanceof n)return this.raw=f.value,this.set=[[f]],this.format(),this;if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=f,this.set=f.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${f}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(C=>!v(C[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const C of this.set)if(C.length===1&&m(C[0])){this.set=[C];break}}}this.format()}format(){return this.range=this.set.map(f=>f.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(f){f=f.trim();const N=`parseRange:${Object.keys(this.options).join(",")}:${f}`,C=a.get(N);if(C)return C;const j=this.options.loose,k=j?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];f=f.replace(k,le(this.options.includePrerelease)),i("hyphen replace",f),f=f.replace(l[c.COMPARATORTRIM],g),i("comparator trim",f),f=f.replace(l[c.TILDETRIM],d),f=f.replace(l[c.CARETTRIM],h),f=f.split(/\s+/).join(" ");let R=f.split(" ").map(U=>u(U,this.options)).join(" ").split(/\s+/).map(U=>z(U,this.options));j&&(R=R.filter(U=>(i("loose invalid filter",U,this.options),!!U.match(l[c.COMPARATORLOOSE])))),i("range list",R);const $=new Map,A=R.map(U=>new n(U,this.options));for(const U of A){if(v(U))return[U];$.set(U.value,U)}$.size>1&&$.has("")&&$.delete("");const M=[...$.values()];return a.set(N,M),M}intersects(f,E){if(!(f instanceof t))throw new TypeError("a Range is required");return this.set.some(N=>b(N,E)&&f.set.some(C=>b(C,E)&&N.every(j=>C.every(k=>j.intersects(k,E)))))}test(f){if(!f)return!1;if(typeof f=="string")try{f=new o(f,this.options)}catch{return!1}for(let E=0;E<this.set.length;E++)if(he(this.set[E],f,this.options))return!0;return!1}}st=t;const e=kn,a=new e({max:1e3}),r=Ve,n=We(),i=Me,o=V,{re:l,t:c,comparatorTrimReplace:g,tildeTrimReplace:d,caretTrimReplace:h}=ie,v=y=>y.value==="<0.0.0-0",m=y=>y.value==="",b=(y,f)=>{let E=!0;const N=y.slice();let C=N.pop();for(;E&&N.length;)E=N.every(j=>C.intersects(j,f)),C=N.pop();return E},u=(y,f)=>(i("comp",y,f),y=X(y,f),i("caret",y),y=O(y,f),i("tildes",y),y=p(y,f),i("xrange",y),y=T(y,f),i("stars",y),y),w=y=>!y||y.toLowerCase()==="x"||y==="*",O=(y,f)=>y.trim().split(/\s+/).map(E=>G(E,f)).join(" "),G=(y,f)=>{const E=f.loose?l[c.TILDELOOSE]:l[c.TILDE];return y.replace(E,(N,C,j,k,R)=>{i("tilde",y,N,C,j,k,R);let $;return w(C)?$="":w(j)?$=`>=${C}.0.0 <${+C+1}.0.0-0`:w(k)?$=`>=${C}.${j}.0 <${C}.${+j+1}.0-0`:R?(i("replaceTilde pr",R),$=`>=${C}.${j}.${k}-${R} <${C}.${+j+1}.0-0`):$=`>=${C}.${j}.${k} <${C}.${+j+1}.0-0`,i("tilde return",$),$})},X=(y,f)=>y.trim().split(/\s+/).map(E=>J(E,f)).join(" "),J=(y,f)=>{i("caret",y,f);const E=f.loose?l[c.CARETLOOSE]:l[c.CARET],N=f.includePrerelease?"-0":"";return y.replace(E,(C,j,k,R,$)=>{i("caret",y,C,j,k,R,$);let A;return w(j)?A="":w(k)?A=`>=${j}.0.0${N} <${+j+1}.0.0-0`:w(R)?j==="0"?A=`>=${j}.${k}.0${N} <${j}.${+k+1}.0-0`:A=`>=${j}.${k}.0${N} <${+j+1}.0.0-0`:$?(i("replaceCaret pr",$),j==="0"?k==="0"?A=`>=${j}.${k}.${R}-${$} <${j}.${k}.${+R+1}-0`:A=`>=${j}.${k}.${R}-${$} <${j}.${+k+1}.0-0`:A=`>=${j}.${k}.${R}-${$} <${+j+1}.0.0-0`):(i("no pr"),j==="0"?k==="0"?A=`>=${j}.${k}.${R}${N} <${j}.${k}.${+R+1}-0`:A=`>=${j}.${k}.${R}${N} <${j}.${+k+1}.0-0`:A=`>=${j}.${k}.${R} <${+j+1}.0.0-0`),i("caret return",A),A})},p=(y,f)=>(i("replaceXRanges",y,f),y.split(/\s+/).map(E=>x(E,f)).join(" ")),x=(y,f)=>{y=y.trim();const E=f.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return y.replace(E,(N,C,j,k,R,$)=>{i("xRange",y,N,C,j,k,R,$);const A=w(j),M=A||w(k),U=M||w(R),ae=U;return C==="="&&ae&&(C=""),$=f.includePrerelease?"-0":"",A?C===">"||C==="<"?N="<0.0.0-0":N="*":C&&ae?(M&&(k=0),R=0,C===">"?(C=">=",M?(j=+j+1,k=0,R=0):(k=+k+1,R=0)):C==="<="&&(C="<",M?j=+j+1:k=+k+1),C==="<"&&($="-0"),N=`${C+j}.${k}.${R}${$}`):M?N=`>=${j}.0.0${$} <${+j+1}.0.0-0`:U&&(N=`>=${j}.${k}.0${$} <${j}.${+k+1}.0-0`),i("xRange return",N),N})},T=(y,f)=>(i("replaceStars",y,f),y.trim().replace(l[c.STAR],"")),z=(y,f)=>(i("replaceGTE0",y,f),y.trim().replace(l[f.includePrerelease?c.GTE0PRE:c.GTE0],"")),le=y=>(f,E,N,C,j,k,R,$,A,M,U,ae,Te)=>(w(N)?E="":w(C)?E=`>=${N}.0.0${y?"-0":""}`:w(j)?E=`>=${N}.${C}.0${y?"-0":""}`:k?E=`>=${E}`:E=`>=${E}${y?"-0":""}`,w(A)?$="":w(M)?$=`<${+A+1}.0.0-0`:w(U)?$=`<${A}.${+M+1}.0-0`:ae?$=`<=${A}.${M}.${U}-${ae}`:y?$=`<${A}.${M}.${+U+1}-0`:$=`<=${$}`,`${E} ${$}`.trim()),he=(y,f,E)=>{for(let N=0;N<y.length;N++)if(!y[N].test(f))return!1;if(f.prerelease.length&&!E.includePrerelease){for(let N=0;N<y.length;N++)if(i(y[N].semver),y[N].semver!==n.ANY&&y[N].semver.prerelease.length>0){const C=y[N].semver;if(C.major===f.major&&C.minor===f.minor&&C.patch===f.patch)return!0}return!1}return!0};return st}var at,Ft;function We(){if(Ft)return at;Ft=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,h){if(h=a(h),d instanceof e){if(d.loose===!!h.loose)return d;d=d.value}o("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const h=this.options.loose?r[n.COMPARATORLOOSE]:r[n.COMPARATOR],v=d.match(h);if(!v)throw new TypeError(`Invalid comparator: ${d}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new l(v[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return i(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof e))throw new TypeError("a Comparator is required");if((!h||typeof h!="object")&&(h={loose:!!h,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new c(d.value,h).test(this.value);if(d.operator==="")return d.value===""?!0:new c(this.value,h).test(d.semver);const v=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),m=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),b=this.semver.version===d.semver.version,u=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),w=i(this.semver,"<",d.semver,h)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),O=i(this.semver,">",d.semver,h)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return v||m||b&&u||w||O}}at=e;const a=Ve,{re:r,t:n}=ie,i=os,o=Me,l=V,c=ee();return at}const In=ee(),Rn=(t,e,a)=>{try{e=new In(e,a)}catch{return!1}return e.test(t)};var Xe=Rn;const Tn=ee(),An=(t,e)=>new Tn(t,e).set.map(a=>a.map(r=>r.value).join(" ").trim().split(" "));var On=An;const Ln=V,Pn=ee(),zn=(t,e,a)=>{let r=null,n=null,i=null;try{i=new Pn(e,a)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||n.compare(o)===-1)&&(r=o,n=new Ln(r,a))}),r};var Dn=zn;const Un=V,Fn=ee(),_n=(t,e,a)=>{let r=null,n=null,i=null;try{i=new Fn(e,a)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||n.compare(o)===1)&&(r=o,n=new Un(r,a))}),r};var Bn=_n;const rt=V,Hn=ee(),_t=Ge,Mn=(t,e)=>{t=new Hn(t,e);let a=new rt("0.0.0");if(t.test(a)||(a=new rt("0.0.0-0"),t.test(a)))return a;a=null;for(let r=0;r<t.set.length;++r){const n=t.set[r];let i=null;n.forEach(o=>{const l=new rt(o.semver.version);switch(o.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!i||_t(l,i))&&(i=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!a||_t(a,i))&&(a=i)}return a&&t.test(a)?a:null};var Vn=Mn;const Gn=ee(),Wn=(t,e)=>{try{return new Gn(t,e).range||"*"}catch{return null}};var Xn=Wn;const Jn=V,cs=We(),{ANY:qn}=cs,Yn=ee(),Kn=Xe,Bt=Ge,Ht=ut,Zn=ft,Qn=pt,ei=(t,e,a,r)=>{t=new Jn(t,r),e=new Yn(e,r);let n,i,o,l,c;switch(a){case">":n=Bt,i=Zn,o=Ht,l=">",c=">=";break;case"<":n=Ht,i=Qn,o=Bt,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Kn(t,e,r))return!1;for(let g=0;g<e.set.length;++g){const d=e.set[g];let h=null,v=null;if(d.forEach(m=>{m.semver===qn&&(m=new cs(">=0.0.0")),h=h||m,v=v||m,n(m.semver,h.semver,r)?h=m:o(m.semver,v.semver,r)&&(v=m)}),h.operator===l||h.operator===c||(!v.operator||v.operator===l)&&i(t,v.semver))return!1;if(v.operator===c&&o(t,v.semver))return!1}return!0};var gt=ei;const ti=gt,si=(t,e,a)=>ti(t,e,">",a);var ai=si;const ri=gt,ni=(t,e,a)=>ri(t,e,"<",a);var ii=ni;const Mt=ee(),oi=(t,e,a)=>(t=new Mt(t,a),e=new Mt(e,a),t.intersects(e));var li=oi;const ci=Xe,di=Q;var hi=(t,e,a)=>{const r=[];let n=null,i=null;const o=t.sort((d,h)=>di(d,h,a));for(const d of o)ci(d,e,a)?(i=d,n||(n=d)):(i&&r.push([n,i]),i=null,n=null);n&&r.push([n,null]);const l=[];for(const[d,h]of r)d===h?l.push(d):!h&&d===o[0]?l.push("*"):h?d===o[0]?l.push(`<=${h}`):l.push(`${d} - ${h}`):l.push(`>=${d}`);const c=l.join(" || "),g=typeof e.raw=="string"?e.raw:String(e);return c.length<g.length?c:e};const Vt=ee(),_e=We(),{ANY:nt}=_e,Ce=Xe,xt=Q,mi=(t,e,a={})=>{if(t===e)return!0;t=new Vt(t,a),e=new Vt(e,a);let r=!1;e:for(const n of t.set){for(const i of e.set){const o=ui(n,i,a);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},ui=(t,e,a)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===nt){if(e.length===1&&e[0].semver===nt)return!0;a.includePrerelease?t=[new _e(">=0.0.0-0")]:t=[new _e(">=0.0.0")]}if(e.length===1&&e[0].semver===nt){if(a.includePrerelease)return!0;e=[new _e(">=0.0.0")]}const r=new Set;let n,i;for(const m of t)m.operator===">"||m.operator===">="?n=Gt(n,m,a):m.operator==="<"||m.operator==="<="?i=Wt(i,m,a):r.add(m.semver);if(r.size>1)return null;let o;if(n&&i){if(o=xt(n.semver,i.semver,a),o>0)return null;if(o===0&&(n.operator!==">="||i.operator!=="<="))return null}for(const m of r){if(n&&!Ce(m,String(n),a)||i&&!Ce(m,String(i),a))return null;for(const b of e)if(!Ce(m,String(b),a))return!1;return!0}let l,c,g,d,h=i&&!a.includePrerelease&&i.semver.prerelease.length?i.semver:!1,v=n&&!a.includePrerelease&&n.semver.prerelease.length?n.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const m of e){if(d=d||m.operator===">"||m.operator===">=",g=g||m.operator==="<"||m.operator==="<=",n){if(v&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===v.major&&m.semver.minor===v.minor&&m.semver.patch===v.patch&&(v=!1),m.operator===">"||m.operator===">="){if(l=Gt(n,m,a),l===m&&l!==n)return!1}else if(n.operator===">="&&!Ce(n.semver,String(m),a))return!1}if(i){if(h&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===h.major&&m.semver.minor===h.minor&&m.semver.patch===h.patch&&(h=!1),m.operator==="<"||m.operator==="<="){if(c=Wt(i,m,a),c===m&&c!==i)return!1}else if(i.operator==="<="&&!Ce(i.semver,String(m),a))return!1}if(!m.operator&&(i||n)&&o!==0)return!1}return!(n&&g&&!i&&o!==0||i&&d&&!n&&o!==0||v||h)},Gt=(t,e,a)=>{if(!t)return e;const r=xt(t.semver,e.semver,a);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Wt=(t,e,a)=>{if(!t)return e;const r=xt(t.semver,e.semver,a);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var pi=mi;const it=ie,fi=He,gi=V,Xt=ns,xi=Ne,vi=fr,yi=vr,wi=wr,bi=Er,Ni=Ir,ji=Ar,Si=Pr,Ci=Ur,Ei=Q,$i=Br,ki=Vr,Ii=mt,Ri=Jr,Ti=Kr,Ai=Ge,Oi=ut,Li=ht,Pi=is,zi=pt,Di=ft,Ui=os,Fi=yn,_i=We(),Bi=ee(),Hi=Xe,Mi=On,Vi=Dn,Gi=Bn,Wi=Vn,Xi=Xn,Ji=gt,qi=ai,Yi=ii,Ki=li,Zi=hi,Qi=pi;var eo={parse:xi,valid:vi,clean:yi,inc:wi,diff:bi,major:Ni,minor:ji,patch:Si,prerelease:Ci,compare:Ei,rcompare:$i,compareLoose:ki,compareBuild:Ii,sort:Ri,rsort:Ti,gt:Ai,lt:Oi,eq:Li,neq:Pi,gte:zi,lte:Di,cmp:Ui,coerce:Fi,Comparator:_i,Range:Bi,satisfies:Hi,toComparators:Mi,maxSatisfying:Vi,minSatisfying:Gi,minVersion:Wi,validRange:Xi,outside:Ji,gtr:qi,ltr:Yi,intersects:Ki,simplifyRange:Zi,subset:Qi,SemVer:gi,re:it.re,src:it.src,tokens:it.t,SEMVER_SPEC_VERSION:fi.SEMVER_SPEC_VERSION,compareIdentifiers:Xt.compareIdentifiers,rcompareIdentifiers:Xt.rcompareIdentifiers};const to=()=>{const t=de(),e=t.state.systemStatus.profile,[a,r]=S.useState({latestVersion:"",show:!1});S.useEffect(()=>{t.state.systemStatus.ignoreUpgrade||Xs().then(i=>{const{skippedVersion:o}=vt.get(["skippedVersion"]),l=i.slice(1)||"0.0.0",c=e.version;r({latestVersion:l,show:!(o?o===l:!1)&&eo.compare(c,l)===-1})})},[]);const n=()=>{vt.set({skippedVersion:a.latestVersion}),r(i=>({...i,show:!1}))};return a.show?s.jsxs("div",{className:"flex flex-row items-center justify-center w-full py-2 text-white bg-green-600",children:[s.jsxs("a",{className:"flex flex-row items-center justify-center hover:underline",target:"_blank",href:"https://github.com/usememos/memos/releases",children:[s.jsx(I.ArrowUpCircle,{className:"w-5 h-auto mr-2"}),"New Update ",s.jsx("span",{className:"ml-1 font-bold",children:a.latestVersion})]}),s.jsx("button",{className:"absolute opacity-80 right-4 hover:opacity-100",title:"Skip this version",onClick:n,children:s.jsx(I.X,{})})]}):null};function io(){return s.jsxs("div",{className:"w-full min-h-full bg-zinc-100 dark:bg-zinc-800",children:[s.jsx("div",{className:"w-full h-auto flex flex-col justify-start items-center",children:s.jsx(to,{})}),s.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-row justify-center items-start",children:[s.jsx(Za,{}),s.jsx("main",{className:"w-auto max-w-full flex-grow shrink flex flex-col justify-start items-start",children:s.jsx(Js,{})})]})]})}export{io as default};
