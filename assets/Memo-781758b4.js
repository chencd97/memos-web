import{b3 as ln,an as dn,ao as un,ap as te,b4 as Ze,b5 as fn,b6 as mn,b7 as hn,b8 as pn,b9 as gn,r as m,b as O,c as je,ba as vn,bb as wn,j as g,aB as yt,I as S,bc as we,p as Fe,n as Ne,aL as $t,t as Y,q as Et,Y as Be,x as xn,a2 as Je,$ as et,aI as bn,aS as yn,V as $n,S as En,O as Cn,a0 as Ct,a1 as Pt,bd as Pn,aM as tt,be as nt,ah as Nn,bf as ot,b2 as rt,w as Mn,az as Rn,U as An}from"./index-094173a8.js";import{i as st}from"./memo-b208f1a2.js";function Tn(e){return ln(e).toLowerCase()}function it(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?dn(e,void 0,t):[]}const Sn=()=>({state:un(t=>t.editor),getState:()=>te.getState().editor,setEditMemoWithId:t=>{te.dispatch(Ze(t))},clearEditMemo:()=>{te.dispatch(Ze())},setMemoVisibility:t=>{te.dispatch(fn(t))},setResourceList:t=>{te.dispatch(mn(t))},setRelationList:t=>{te.dispatch(hn(t))}});pn()(gn((e,t)=>({messageList:[],getState:()=>t(),addMessage:o=>e(r=>({messageList:[...r.messageList,o]}))}),{name:"message-storage"}));function j(e,t,{checkForDefaultPrevented:o=!0}={}){return function(a){if(e==null||e(a),o===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Dn(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Nt(...e){return t=>e.forEach(o=>Dn(o,t))}function ne(...e){return m.useCallback(Nt(...e),e)}function Mt(e,t=[]){let o=[];function r(l,d){const u=m.createContext(d),n=o.length;o=[...o,d];function s(c){const{scope:f,children:h,...p}=c,w=(f==null?void 0:f[e][n])||u,v=m.useMemo(()=>p,Object.values(p));return m.createElement(w.Provider,{value:v},h)}function i(c,f){const h=(f==null?void 0:f[e][n])||u,p=m.useContext(h);if(p)return p;if(d!==void 0)return d;throw new Error(`\`${c}\` must be used within \`${l}\``)}return s.displayName=l+"Provider",[s,i]}const a=()=>{const l=o.map(d=>m.createContext(d));return function(u){const n=(u==null?void 0:u[e])||l;return m.useMemo(()=>({[`__scope${e}`]:{...u,[e]:n}}),[u,n])}};return a.scopeName=e,[r,Ln(a,...t)]}function Ln(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const d=r.reduce((u,{useScope:n,scopeName:s})=>{const c=n(l)[`__scope${s}`];return{...u,...c}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return o.scopeName=t.scopeName,o}const Rt=m.forwardRef((e,t)=>{const{children:o,...r}=e,a=m.Children.toArray(o),l=a.find(On);if(l){const d=l.props.children,u=a.map(n=>n===l?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:n);return m.createElement(Se,O({},r,{ref:t}),m.isValidElement(d)?m.cloneElement(d,void 0,u):null)}return m.createElement(Se,O({},r,{ref:t}),o)});Rt.displayName="Slot";const Se=m.forwardRef((e,t)=>{const{children:o,...r}=e;return m.isValidElement(o)?m.cloneElement(o,{..._n(r,o.props),ref:Nt(t,o.ref)}):m.Children.count(o)>1?m.Children.only(null):null});Se.displayName="SlotClone";const At=({children:e})=>m.createElement(m.Fragment,null,e);function On(e){return m.isValidElement(e)&&e.type===At}function _n(e,t){const o={...t};for(const r in t){const a=e[r],l=t[r];/^on[A-Z]/.test(r)?a&&l?o[r]=(...u)=>{l(...u),a(...u)}:a&&(o[r]=a):r==="style"?o[r]={...a,...l}:r==="className"&&(o[r]=[a,l].filter(Boolean).join(" "))}return{...e,...o}}const kn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Q=kn.reduce((e,t)=>{const o=m.forwardRef((r,a)=>{const{asChild:l,...d}=r,u=l?Rt:t;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(u,O({},d,{ref:a}))});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function In(e,t){e&&je.flushSync(()=>e.dispatchEvent(t))}function oe(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...o)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...o)},[])}function jn(e,t=globalThis==null?void 0:globalThis.document){const o=oe(e);m.useEffect(()=>{const r=a=>{a.key==="Escape"&&o(a)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[o,t])}const De="dismissableLayer.update",Fn="dismissableLayer.pointerDownOutside",Bn="dismissableLayer.focusOutside";let at;const zn=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hn=m.forwardRef((e,t)=>{var o;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,onDismiss:n,...s}=e,i=m.useContext(zn),[c,f]=m.useState(null),h=(o=c==null?void 0:c.ownerDocument)!==null&&o!==void 0?o:globalThis==null?void 0:globalThis.document,[,p]=m.useState({}),w=ne(t,$=>f($)),v=Array.from(i.layers),[E]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(E),x=c?v.indexOf(c):-1,b=i.layersWithOutsidePointerEventsDisabled.size>0,N=x>=y,M=Un($=>{const T=$.target,D=[...i.branches].some(P=>P.contains(T));!N||D||(l==null||l($),u==null||u($),$.defaultPrevented||n==null||n())},h),C=Wn($=>{const T=$.target;[...i.branches].some(P=>P.contains(T))||(d==null||d($),u==null||u($),$.defaultPrevented||n==null||n())},h);return jn($=>{x===i.layers.size-1&&(a==null||a($),!$.defaultPrevented&&n&&($.preventDefault(),n()))},h),m.useEffect(()=>{if(c)return r&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(at=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(c)),i.layers.add(c),ct(),()=>{r&&i.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=at)}},[c,h,r,i]),m.useEffect(()=>()=>{c&&(i.layers.delete(c),i.layersWithOutsidePointerEventsDisabled.delete(c),ct())},[c,i]),m.useEffect(()=>{const $=()=>p({});return document.addEventListener(De,$),()=>document.removeEventListener(De,$)},[]),m.createElement(Q.div,O({},s,{ref:w,style:{pointerEvents:b?N?"auto":"none":void 0,...e.style},onFocusCapture:j(e.onFocusCapture,C.onFocusCapture),onBlurCapture:j(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:j(e.onPointerDownCapture,M.onPointerDownCapture)}))});function Un(e,t=globalThis==null?void 0:globalThis.document){const o=oe(e),r=m.useRef(!1),a=m.useRef(()=>{});return m.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let s=function(){Tt(Fn,o,n,{discrete:!0})};const n={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=s,t.addEventListener("click",a.current,{once:!0})):s()}r.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",l),t.removeEventListener("click",a.current)}},[t,o]),{onPointerDownCapture:()=>r.current=!0}}function Wn(e,t=globalThis==null?void 0:globalThis.document){const o=oe(e),r=m.useRef(!1);return m.useEffect(()=>{const a=l=>{l.target&&!r.current&&Tt(Bn,o,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,o]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ct(){const e=new CustomEvent(De);document.dispatchEvent(e)}function Tt(e,t,o,{discrete:r}){const a=o.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:o});t&&a.addEventListener(e,t,{once:!0}),r?In(a,l):a.dispatchEvent(l)}const H=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},Vn=vn["useId".toString()]||(()=>{});let Yn=0;function Qn(e){const[t,o]=m.useState(Vn());return H(()=>{e||o(r=>r??String(Yn++))},[e]),e||(t?`radix-${t}`:"")}function X(e){return e.split("-")[0]}function fe(e){return e.split("-")[1]}function re(e){return["top","bottom"].includes(X(e))?"x":"y"}function ze(e){return e==="y"?"height":"width"}function lt(e,t,o){let{reference:r,floating:a}=e;const l=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,u=re(t),n=ze(u),s=r[n]/2-a[n]/2,i=u==="x";let c;switch(X(t)){case"top":c={x:l,y:r.y-a.height};break;case"bottom":c={x:l,y:r.y+r.height};break;case"right":c={x:r.x+r.width,y:d};break;case"left":c={x:r.x-a.width,y:d};break;default:c={x:r.x,y:r.y}}switch(fe(t)){case"start":c[u]-=s*(o&&i?-1:1);break;case"end":c[u]+=s*(o&&i?-1:1)}return c}const Gn=async(e,t,o)=>{const{placement:r="bottom",strategy:a="absolute",middleware:l=[],platform:d}=o,u=await(d.isRTL==null?void 0:d.isRTL(t));let n=await d.getElementRects({reference:e,floating:t,strategy:a}),{x:s,y:i}=lt(n,r,u),c=r,f={},h=0;for(let p=0;p<l.length;p++){const{name:w,fn:v}=l[p],{x:E,y,data:x,reset:b}=await v({x:s,y:i,initialPlacement:r,placement:c,strategy:a,middlewareData:f,rects:n,platform:d,elements:{reference:e,floating:t}});s=E??s,i=y??i,f={...f,[w]:{...f[w],...x}},b&&h<=50&&(h++,typeof b=="object"&&(b.placement&&(c=b.placement),b.rects&&(n=b.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:a}):b.rects),{x:s,y:i}=lt(n,c,u)),p=-1)}return{x:s,y:i,placement:c,strategy:a,middlewareData:f}};function St(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function be(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function de(e,t){var o;t===void 0&&(t={});const{x:r,y:a,platform:l,rects:d,elements:u,strategy:n}=e,{boundary:s="clippingAncestors",rootBoundary:i="viewport",elementContext:c="floating",altBoundary:f=!1,padding:h=0}=t,p=St(h),w=u[f?c==="floating"?"reference":"floating":c],v=be(await l.getClippingRect({element:(o=await(l.isElement==null?void 0:l.isElement(w)))==null||o?w:w.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:s,rootBoundary:i,strategy:n})),E=be(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:c==="floating"?{...d.floating,x:r,y:a}:d.reference,offsetParent:await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),strategy:n}):d[c]);return{top:v.top-E.top+p.top,bottom:E.bottom-v.bottom+p.bottom,left:v.left-E.left+p.left,right:E.right-v.right+p.right}}const Xn=Math.min,V=Math.max;function Le(e,t,o){return V(e,Xn(t,o))}const dt=e=>({name:"arrow",options:e,async fn(t){const{element:o,padding:r=0}=e??{},{x:a,y:l,placement:d,rects:u,platform:n}=t;if(o==null)return{};const s=St(r),i={x:a,y:l},c=re(d),f=fe(d),h=ze(c),p=await n.getDimensions(o),w=c==="y"?"top":"left",v=c==="y"?"bottom":"right",E=u.reference[h]+u.reference[c]-i[c]-u.floating[h],y=i[c]-u.reference[c],x=await(n.getOffsetParent==null?void 0:n.getOffsetParent(o));let b=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0;b===0&&(b=u.floating[h]);const N=E/2-y/2,M=s[w],C=b-p[h]-s[v],$=b/2-p[h]/2+N,T=Le(M,$,C),D=(f==="start"?s[w]:s[v])>0&&$!==T&&u.reference[h]<=u.floating[h];return{[c]:i[c]-(D?$<M?M-$:C-$:0),data:{[c]:T,centerOffset:$-T}}}}),Kn={left:"right",right:"left",bottom:"top",top:"bottom"};function ye(e){return e.replace(/left|right|bottom|top/g,t=>Kn[t])}function qn(e,t,o){o===void 0&&(o=!1);const r=fe(e),a=re(e),l=ze(a);let d=a==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(d=ye(d)),{main:d,cross:ye(d)}}const Zn={start:"end",end:"start"};function ut(e){return e.replace(/start|end/g,t=>Zn[t])}const Dt=["top","right","bottom","left"];Dt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const Jn=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var o;const{placement:r,middlewareData:a,rects:l,initialPlacement:d,platform:u,elements:n}=t,{mainAxis:s=!0,crossAxis:i=!0,fallbackPlacements:c,fallbackStrategy:f="bestFit",flipAlignment:h=!0,...p}=e,w=X(r),v=c||(w===d||!h?[ye(d)]:function($){const T=ye($);return[ut($),T,ut(T)]}(d)),E=[d,...v],y=await de(t,p),x=[];let b=((o=a.flip)==null?void 0:o.overflows)||[];if(s&&x.push(y[w]),i){const{main:$,cross:T}=qn(r,l,await(u.isRTL==null?void 0:u.isRTL(n.floating)));x.push(y[$],y[T])}if(b=[...b,{placement:r,overflows:x}],!x.every($=>$<=0)){var N,M;const $=((N=(M=a.flip)==null?void 0:M.index)!=null?N:0)+1,T=E[$];if(T)return{data:{index:$,overflows:b},reset:{placement:T}};let D="bottom";switch(f){case"bestFit":{var C;const P=(C=b.map(R=>[R,R.overflows.filter(A=>A>0).reduce((A,K)=>A+K,0)]).sort((R,A)=>R[1]-A[1])[0])==null?void 0:C[0].placement;P&&(D=P);break}case"initialPlacement":D=d}if(r!==D)return{reset:{placement:D}}}return{}}}};function ft(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mt(e){return Dt.some(t=>e[t]>=0)}const eo=function(e){let{strategy:t="referenceHidden",...o}=e===void 0?{}:e;return{name:"hide",async fn(r){const{rects:a}=r;switch(t){case"referenceHidden":{const l=ft(await de(r,{...o,elementContext:"reference"}),a.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:mt(l)}}}case"escaped":{const l=ft(await de(r,{...o,altBoundary:!0}),a.floating);return{data:{escapedOffsets:l,escaped:mt(l)}}}default:return{}}}}},to=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:o,y:r}=t,a=await async function(l,d){const{placement:u,platform:n,elements:s}=l,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=X(u),f=fe(u),h=re(u)==="x",p=["left","top"].includes(c)?-1:1,w=i&&h?-1:1,v=typeof d=="function"?d(l):d;let{mainAxis:E,crossAxis:y,alignmentAxis:x}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return f&&typeof x=="number"&&(y=f==="end"?-1*x:x),h?{x:y*w,y:E*p}:{x:E*p,y:y*w}}(t,e);return{x:o+a.x,y:r+a.y,data:a}}}};function Lt(e){return e==="x"?"y":"x"}const no=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:r,placement:a}=t,{mainAxis:l=!0,crossAxis:d=!1,limiter:u={fn:v=>{let{x:E,y}=v;return{x:E,y}}},...n}=e,s={x:o,y:r},i=await de(t,n),c=re(X(a)),f=Lt(c);let h=s[c],p=s[f];if(l){const v=c==="y"?"bottom":"right";h=Le(h+i[c==="y"?"top":"left"],h,h-i[v])}if(d){const v=f==="y"?"bottom":"right";p=Le(p+i[f==="y"?"top":"left"],p,p-i[v])}const w=u.fn({...t,[c]:h,[f]:p});return{...w,data:{x:w.x-o,y:w.y-r}}}}},oo=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:o,y:r,placement:a,rects:l,middlewareData:d}=t,{offset:u=0,mainAxis:n=!0,crossAxis:s=!0}=e,i={x:o,y:r},c=re(a),f=Lt(c);let h=i[c],p=i[f];const w=typeof u=="function"?u({...l,placement:a}):u,v=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(n){const N=c==="y"?"height":"width",M=l.reference[c]-l.floating[N]+v.mainAxis,C=l.reference[c]+l.reference[N]-v.mainAxis;h<M?h=M:h>C&&(h=C)}if(s){var E,y,x,b;const N=c==="y"?"width":"height",M=["top","left"].includes(X(a)),C=l.reference[f]-l.floating[N]+(M&&(E=(y=d.offset)==null?void 0:y[f])!=null?E:0)+(M?0:v.crossAxis),$=l.reference[f]+l.reference[N]+(M?0:(x=(b=d.offset)==null?void 0:b[f])!=null?x:0)-(M?v.crossAxis:0);p<C?p=C:p>$&&(p=$)}return{[c]:h,[f]:p}}}},ro=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:o,rects:r,platform:a,elements:l}=t,{apply:d,...u}=e,n=await de(t,u),s=X(o),i=fe(o);let c,f;s==="top"||s==="bottom"?(c=s,f=i===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(f=s,c=i==="end"?"top":"bottom");const h=V(n.left,0),p=V(n.right,0),w=V(n.top,0),v=V(n.bottom,0),E={availableHeight:r.floating.height-(["left","right"].includes(o)?2*(w!==0||v!==0?w+v:V(n.top,n.bottom)):n[c]),availableWidth:r.floating.width-(["top","bottom"].includes(o)?2*(h!==0||p!==0?h+p:V(n.left,n.right)):n[f])},y=await a.getDimensions(l.floating);d==null||d({...t,...E});const x=await a.getDimensions(l.floating);return y.width!==x.width||y.height!==x.height?{reset:{rects:!0}}:{}}}};function Ot(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function z(e){if(e==null)return window;if(!Ot(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function me(e){return z(e).getComputedStyle(e)}function F(e){return Ot(e)?"":e?(e.nodeName||"").toLowerCase():""}function _t(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function _(e){return e instanceof z(e).HTMLElement}function W(e){return e instanceof z(e).Element}function He(e){return typeof ShadowRoot>"u"?!1:e instanceof z(e).ShadowRoot||e instanceof ShadowRoot}function Me(e){const{overflow:t,overflowX:o,overflowY:r}=me(e);return/auto|scroll|overlay|hidden/.test(t+r+o)}function so(e){return["table","td","th"].includes(F(e))}function ht(e){const t=/firefox/i.test(_t()),o=me(e);return o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].includes(o.willChange)||t&&o.willChange==="filter"||t&&!!o.filter&&o.filter!=="none"}function kt(){return!/^((?!chrome|android).)*safari/i.test(_t())}const pt=Math.min,le=Math.max,$e=Math.round;function B(e,t,o){var r,a,l,d;t===void 0&&(t=!1),o===void 0&&(o=!1);const u=e.getBoundingClientRect();let n=1,s=1;t&&_(e)&&(n=e.offsetWidth>0&&$e(u.width)/e.offsetWidth||1,s=e.offsetHeight>0&&$e(u.height)/e.offsetHeight||1);const i=W(e)?z(e):window,c=!kt()&&o,f=(u.left+(c&&(r=(a=i.visualViewport)==null?void 0:a.offsetLeft)!=null?r:0))/n,h=(u.top+(c&&(l=(d=i.visualViewport)==null?void 0:d.offsetTop)!=null?l:0))/s,p=u.width/n,w=u.height/s;return{width:p,height:w,top:h,right:f+p,bottom:h+w,left:f,x:f,y:h}}function U(e){return(t=e,(t instanceof z(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function Re(e){return W(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function It(e){return B(U(e)).left+Re(e).scrollLeft}function io(e,t,o){const r=_(t),a=U(t),l=B(e,r&&function(n){const s=B(n);return $e(s.width)!==n.offsetWidth||$e(s.height)!==n.offsetHeight}(t),o==="fixed");let d={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if(r||!r&&o!=="fixed")if((F(t)!=="body"||Me(a))&&(d=Re(t)),_(t)){const n=B(t,!0);u.x=n.x+t.clientLeft,u.y=n.y+t.clientTop}else a&&(u.x=It(a));return{x:l.left+d.scrollLeft-u.x,y:l.top+d.scrollTop-u.y,width:l.width,height:l.height}}function jt(e){return F(e)==="html"?e:e.assignedSlot||e.parentNode||(He(e)?e.host:null)||U(e)}function gt(e){return _(e)&&getComputedStyle(e).position!=="fixed"?e.offsetParent:null}function Oe(e){const t=z(e);let o=gt(e);for(;o&&so(o)&&getComputedStyle(o).position==="static";)o=gt(o);return o&&(F(o)==="html"||F(o)==="body"&&getComputedStyle(o).position==="static"&&!ht(o))?t:o||function(r){let a=jt(r);for(He(a)&&(a=a.host);_(a)&&!["html","body"].includes(F(a));){if(ht(a))return a;a=a.parentNode}return null}(e)||t}function vt(e){if(_(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=B(e);return{width:t.width,height:t.height}}function Ft(e){const t=jt(e);return["html","body","#document"].includes(F(t))?e.ownerDocument.body:_(t)&&Me(t)?t:Ft(t)}function Ee(e,t){var o;t===void 0&&(t=[]);const r=Ft(e),a=r===((o=e.ownerDocument)==null?void 0:o.body),l=z(r),d=a?[l].concat(l.visualViewport||[],Me(r)?r:[]):r,u=t.concat(d);return a?u:u.concat(Ee(d))}function wt(e,t,o){return t==="viewport"?be(function(r,a){const l=z(r),d=U(r),u=l.visualViewport;let n=d.clientWidth,s=d.clientHeight,i=0,c=0;if(u){n=u.width,s=u.height;const f=kt();(f||!f&&a==="fixed")&&(i=u.offsetLeft,c=u.offsetTop)}return{width:n,height:s,x:i,y:c}}(e,o)):W(t)?function(r,a){const l=B(r,!1,a==="fixed"),d=l.top+r.clientTop,u=l.left+r.clientLeft;return{top:d,left:u,x:u,y:d,right:u+r.clientWidth,bottom:d+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,o):be(function(r){var a;const l=U(r),d=Re(r),u=(a=r.ownerDocument)==null?void 0:a.body,n=le(l.scrollWidth,l.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),s=le(l.scrollHeight,l.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0);let i=-d.scrollLeft+It(r);const c=-d.scrollTop;return me(u||l).direction==="rtl"&&(i+=le(l.clientWidth,u?u.clientWidth:0)-n),{width:n,height:s,x:i,y:c}}(U(e)))}function ao(e){const t=Ee(e),o=["absolute","fixed"].includes(me(e).position)&&_(e)?Oe(e):e;return W(o)?t.filter(r=>W(r)&&function(a,l){const d=l.getRootNode==null?void 0:l.getRootNode();if(a.contains(l))return!0;if(d&&He(d)){let u=l;do{if(u&&a===u)return!0;u=u.parentNode||u.host}while(u)}return!1}(r,o)&&F(r)!=="body"):[]}const co={getClippingRect:function(e){let{element:t,boundary:o,rootBoundary:r,strategy:a}=e;const l=[...o==="clippingAncestors"?ao(t):[].concat(o),r],d=l[0],u=l.reduce((n,s)=>{const i=wt(t,s,a);return n.top=le(i.top,n.top),n.right=pt(i.right,n.right),n.bottom=pt(i.bottom,n.bottom),n.left=le(i.left,n.left),n},wt(t,d,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:o,strategy:r}=e;const a=_(o),l=U(o);if(o===l)return t;let d={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if((a||!a&&r!=="fixed")&&((F(o)!=="body"||Me(l))&&(d=Re(o)),_(o))){const n=B(o,!0);u.x=n.x+o.clientLeft,u.y=n.y+o.clientTop}return{...t,x:t.x-d.scrollLeft+u.x,y:t.y-d.scrollTop+u.y}},isElement:W,getDimensions:vt,getOffsetParent:Oe,getDocumentElement:U,getElementRects:e=>{let{reference:t,floating:o,strategy:r}=e;return{reference:io(t,Oe(o),r),floating:{...vt(o),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>me(e).direction==="rtl"};function lo(e,t,o,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:d=!0,animationFrame:u=!1}=r,n=a&&!u,s=l&&!u,i=n||s?[...W(e)?Ee(e):[],...Ee(t)]:[];i.forEach(p=>{n&&p.addEventListener("scroll",o,{passive:!0}),s&&p.addEventListener("resize",o)});let c,f=null;if(d){let p=!0;f=new ResizeObserver(()=>{p||o(),p=!1}),W(e)&&!u&&f.observe(e),f.observe(t)}let h=u?B(e):null;return u&&function p(){const w=B(e);!h||w.x===h.x&&w.y===h.y&&w.width===h.width&&w.height===h.height||o(),h=w,c=requestAnimationFrame(p)}(),o(),()=>{var p;i.forEach(w=>{n&&w.removeEventListener("scroll",o),s&&w.removeEventListener("resize",o)}),(p=f)==null||p.disconnect(),f=null,u&&cancelAnimationFrame(c)}}const uo=(e,t,o)=>Gn(e,t,{platform:co,...o});var _e=typeof document<"u"?m.useLayoutEffect:m.useEffect;function ke(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let o,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(!ke(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),o=a.length,o!==Object.keys(t).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=o;r--!==0;){const l=a[r];if(!(l==="_owner"&&e.$$typeof)&&!ke(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function fo(e){const t=m.useRef(e);return _e(()=>{t.current=e}),t}function mo(e){let{middleware:t,placement:o="bottom",strategy:r="absolute",whileElementsMounted:a}=e===void 0?{}:e;const l=m.useRef(null),d=m.useRef(null),u=fo(a),n=m.useRef(null),[s,i]=m.useState({x:null,y:null,strategy:r,placement:o,middlewareData:{}}),[c,f]=m.useState(t);ke(c==null?void 0:c.map(x=>{let{options:b}=x;return b}),t==null?void 0:t.map(x=>{let{options:b}=x;return b}))||f(t);const h=m.useCallback(()=>{!l.current||!d.current||uo(l.current,d.current,{middleware:c,placement:o,strategy:r}).then(x=>{p.current&&je.flushSync(()=>{i(x)})})},[c,o,r]);_e(()=>{p.current&&h()},[h]);const p=m.useRef(!1);_e(()=>(p.current=!0,()=>{p.current=!1}),[]);const w=m.useCallback(()=>{if(typeof n.current=="function"&&(n.current(),n.current=null),l.current&&d.current)if(u.current){const x=u.current(l.current,d.current,h);n.current=x}else h()},[h,u]),v=m.useCallback(x=>{l.current=x,w()},[w]),E=m.useCallback(x=>{d.current=x,w()},[w]),y=m.useMemo(()=>({reference:l,floating:d}),[]);return m.useMemo(()=>({...s,update:h,refs:y,reference:v,floating:E}),[s,h,y,v,E])}const ho=e=>{const{element:t,padding:o}=e;function r(a){return Object.prototype.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){return r(t)?t.current!=null?dt({element:t.current,padding:o}).fn(a):{}:t?dt({element:t,padding:o}).fn(a):{}}}};function po(e){const[t,o]=m.useState(void 0);return H(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let d,u;if("borderBoxSize"in l){const n=l.borderBoxSize,s=Array.isArray(n)?n[0]:n;d=s.inlineSize,u=s.blockSize}else d=e.offsetWidth,u=e.offsetHeight;o({width:d,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else o(void 0)},[e]),t}const Bt="Popper",[Ue,zt]=Mt(Bt),[go,Ht]=Ue(Bt),vo=e=>{const{__scopePopper:t,children:o}=e,[r,a]=m.useState(null);return m.createElement(go,{scope:t,anchor:r,onAnchorChange:a},o)},wo="PopperAnchor",xo=m.forwardRef((e,t)=>{const{__scopePopper:o,virtualRef:r,...a}=e,l=Ht(wo,o),d=m.useRef(null),u=ne(t,d);return m.useEffect(()=>{l.onAnchorChange((r==null?void 0:r.current)||d.current)}),r?null:m.createElement(Q.div,O({},a,{ref:u}))}),Ce="PopperContent",[bo,Dr]=Ue(Ce),[yo,$o]=Ue(Ce,{hasParent:!1,positionUpdateFns:new Set}),Eo=m.forwardRef((e,t)=>{var o,r,a,l,d,u,n,s;const{__scopePopper:i,side:c="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:w=0,collisionBoundary:v=[],collisionPadding:E=0,sticky:y="partial",hideWhenDetached:x=!1,avoidCollisions:b=!0,onPlaced:N,...M}=e,C=Ht(Ce,i),[$,T]=m.useState(null),D=ne(t,ee=>T(ee)),[P,R]=m.useState(null),A=po(P),K=(o=A==null?void 0:A.width)!==null&&o!==void 0?o:0,L=(r=A==null?void 0:A.height)!==null&&r!==void 0?r:0,se=c+(h!=="center"?"-"+h:""),pe=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},ge=Array.isArray(v)?v:[v],ie=ge.length>0,k={padding:pe,boundary:ge.filter(Po),altBoundary:ie},{reference:I,floating:Kt,strategy:qt,x:Ge,y:Xe,placement:Zt,middlewareData:q,update:Te}=mo({strategy:"fixed",placement:se,whileElementsMounted:lo,middleware:[No(),to({mainAxis:f+L,alignmentAxis:p}),b?no({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?oo():void 0,...k}):void 0,P?ho({element:P,padding:w}):void 0,b?Jn({...k}):void 0,ro({...k,apply:({elements:ee,availableWidth:an,availableHeight:cn})=>{ee.floating.style.setProperty("--radix-popper-available-width",`${an}px`),ee.floating.style.setProperty("--radix-popper-available-height",`${cn}px`)}}),Mo({arrowWidth:K,arrowHeight:L}),x?eo({strategy:"referenceHidden"}):void 0].filter(Co)});H(()=>{I(C.anchor)},[I,C.anchor]);const Z=Ge!==null&&Xe!==null,[Ke,Jt]=Ut(Zt),ve=oe(N);H(()=>{Z&&(ve==null||ve())},[Z,ve]);const en=(a=q.arrow)===null||a===void 0?void 0:a.x,tn=(l=q.arrow)===null||l===void 0?void 0:l.y,nn=((d=q.arrow)===null||d===void 0?void 0:d.centerOffset)!==0,[on,rn]=m.useState();H(()=>{$&&rn(window.getComputedStyle($).zIndex)},[$]);const{hasParent:sn,positionUpdateFns:J}=$o(Ce,i),ae=!sn;m.useLayoutEffect(()=>{if(!ae)return J.add(Te),()=>{J.delete(Te)}},[ae,J,Te]),H(()=>{ae&&Z&&Array.from(J).reverse().forEach(ee=>requestAnimationFrame(ee))},[ae,Z,J]);const qe={"data-side":Ke,"data-align":Jt,...M,ref:D,style:{...M.style,animation:Z?void 0:"none",opacity:(u=q.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}};return m.createElement("div",{ref:Kt,"data-radix-popper-content-wrapper":"",style:{position:qt,left:0,top:0,transform:Z?`translate3d(${Math.round(Ge)}px, ${Math.round(Xe)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:on,["--radix-popper-transform-origin"]:[(n=q.transformOrigin)===null||n===void 0?void 0:n.x,(s=q.transformOrigin)===null||s===void 0?void 0:s.y].join(" ")},dir:e.dir},m.createElement(bo,{scope:i,placedSide:Ke,onArrowChange:R,arrowX:en,arrowY:tn,shouldHideArrow:nn},ae?m.createElement(yo,{scope:i,hasParent:!0,positionUpdateFns:J},m.createElement(Q.div,qe)):m.createElement(Q.div,qe)))});function Co(e){return e!==void 0}function Po(e){return e!==null}const No=()=>({name:"anchorCssProperties",fn(e){const{rects:t,elements:o}=e,{width:r,height:a}=t.reference;return o.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),o.floating.style.setProperty("--radix-popper-anchor-height",`${a}px`),{}}}),Mo=e=>({name:"transformOrigin",options:e,fn(t){var o,r,a,l,d;const{placement:u,rects:n,middlewareData:s}=t,c=((o=s.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,f=c?0:e.arrowWidth,h=c?0:e.arrowHeight,[p,w]=Ut(u),v={start:"0%",center:"50%",end:"100%"}[w],E=((r=(a=s.arrow)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0)+f/2,y=((l=(d=s.arrow)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0)+h/2;let x="",b="";return p==="bottom"?(x=c?v:`${E}px`,b=`${-h}px`):p==="top"?(x=c?v:`${E}px`,b=`${n.floating.height+h}px`):p==="right"?(x=`${-h}px`,b=c?v:`${y}px`):p==="left"&&(x=`${n.floating.width+h}px`,b=c?v:`${y}px`),{data:{x,y:b}}}});function Ut(e){const[t,o="center"]=e.split("-");return[t,o]}const Ro=vo,Ao=xo,To=Eo,So=m.forwardRef((e,t)=>{var o;const{container:r=globalThis==null||(o=globalThis.document)===null||o===void 0?void 0:o.body,...a}=e;return r?wn.createPortal(m.createElement(Q.div,O({},a,{ref:t})),r):null});function Do(e,t){return m.useReducer((o,r)=>{const a=t[o][r];return a??o},e)}const We=e=>{const{present:t,children:o}=e,r=Lo(t),a=typeof o=="function"?o({present:r.isPresent}):m.Children.only(o),l=ne(r.ref,a.ref);return typeof o=="function"||r.isPresent?m.cloneElement(a,{ref:l}):null};We.displayName="Presence";function Lo(e){const[t,o]=m.useState(),r=m.useRef({}),a=m.useRef(e),l=m.useRef("none"),d=e?"mounted":"unmounted",[u,n]=Do(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const s=xe(r.current);l.current=u==="mounted"?s:"none"},[u]),H(()=>{const s=r.current,i=a.current;if(i!==e){const f=l.current,h=xe(s);e?n("MOUNT"):h==="none"||(s==null?void 0:s.display)==="none"?n("UNMOUNT"):n(i&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,n]),H(()=>{if(t){const s=c=>{const h=xe(r.current).includes(c.animationName);c.target===t&&h&&je.flushSync(()=>n("ANIMATION_END"))},i=c=>{c.target===t&&(l.current=xe(r.current))};return t.addEventListener("animationstart",i),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{t.removeEventListener("animationstart",i),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}else n("ANIMATION_END")},[t,n]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:m.useCallback(s=>{s&&(r.current=getComputedStyle(s)),o(s)},[])}}function xe(e){return(e==null?void 0:e.animationName)||"none"}function Oo({prop:e,defaultProp:t,onChange:o=()=>{}}){const[r,a]=_o({defaultProp:t,onChange:o}),l=e!==void 0,d=l?e:r,u=oe(o),n=m.useCallback(s=>{if(l){const c=typeof s=="function"?s(e):s;c!==e&&u(c)}else a(s)},[l,e,a,u]);return[d,n]}function _o({defaultProp:e,onChange:t}){const o=m.useState(e),[r]=o,a=m.useRef(r),l=oe(t);return m.useEffect(()=>{a.current!==r&&(l(r),a.current=r)},[r,a,l]),o}const ko=m.forwardRef((e,t)=>m.createElement(Q.span,O({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),Io=ko,[Ae,Lr]=Mt("Tooltip",[zt]),Ve=zt(),jo="TooltipProvider",Fo=700,Ie="tooltip.open",[Bo,Ye]=Ae(jo),zo=e=>{const{__scopeTooltip:t,delayDuration:o=Fo,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:l}=e,[d,u]=m.useState(!0),n=m.useRef(!1),s=m.useRef(0);return m.useEffect(()=>{const i=s.current;return()=>window.clearTimeout(i)},[]),m.createElement(Bo,{scope:t,isOpenDelayed:d,delayDuration:o,onOpen:m.useCallback(()=>{window.clearTimeout(s.current),u(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:n,onPointerInTransitChange:m.useCallback(i=>{n.current=i},[]),disableHoverableContent:a},l)},Qe="Tooltip",[Ho,he]=Ae(Qe),Uo=e=>{const{__scopeTooltip:t,children:o,open:r,defaultOpen:a=!1,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=e,n=Ye(Qe,e.__scopeTooltip),s=Ve(t),[i,c]=m.useState(null),f=Qn(),h=m.useRef(0),p=d??n.disableHoverableContent,w=u??n.delayDuration,v=m.useRef(!1),[E=!1,y]=Oo({prop:r,defaultProp:a,onChange:C=>{C?(n.onOpen(),document.dispatchEvent(new CustomEvent(Ie))):n.onClose(),l==null||l(C)}}),x=m.useMemo(()=>E?v.current?"delayed-open":"instant-open":"closed",[E]),b=m.useCallback(()=>{window.clearTimeout(h.current),v.current=!1,y(!0)},[y]),N=m.useCallback(()=>{window.clearTimeout(h.current),y(!1)},[y]),M=m.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,y(!0)},w)},[w,y]);return m.useEffect(()=>()=>window.clearTimeout(h.current),[]),m.createElement(Ro,s,m.createElement(Ho,{scope:t,contentId:f,open:E,stateAttribute:x,trigger:i,onTriggerChange:c,onTriggerEnter:m.useCallback(()=>{n.isOpenDelayed?M():b()},[n.isOpenDelayed,M,b]),onTriggerLeave:m.useCallback(()=>{p?N():window.clearTimeout(h.current)},[N,p]),onOpen:b,onClose:N,disableHoverableContent:p},o))},xt="TooltipTrigger",Wo=m.forwardRef((e,t)=>{const{__scopeTooltip:o,...r}=e,a=he(xt,o),l=Ye(xt,o),d=Ve(o),u=m.useRef(null),n=ne(t,u,a.onTriggerChange),s=m.useRef(!1),i=m.useRef(!1),c=m.useCallback(()=>s.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",c),[c]),m.createElement(Ao,O({asChild:!0},d),m.createElement(Q.button,O({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:n,onPointerMove:j(e.onPointerMove,f=>{f.pointerType!=="touch"&&!i.current&&!l.isPointerInTransitRef.current&&(a.onTriggerEnter(),i.current=!0)}),onPointerLeave:j(e.onPointerLeave,()=>{a.onTriggerLeave(),i.current=!1}),onPointerDown:j(e.onPointerDown,()=>{s.current=!0,document.addEventListener("pointerup",c,{once:!0})}),onFocus:j(e.onFocus,()=>{s.current||a.onOpen()}),onBlur:j(e.onBlur,a.onClose),onClick:j(e.onClick,a.onClose)})))}),Wt="TooltipPortal",[Vo,Yo]=Ae(Wt,{forceMount:void 0}),Qo=e=>{const{__scopeTooltip:t,forceMount:o,children:r,container:a}=e,l=he(Wt,t);return m.createElement(Vo,{scope:t,forceMount:o},m.createElement(We,{present:o||l.open},m.createElement(So,{asChild:!0,container:a},r)))},ue="TooltipContent",Go=m.forwardRef((e,t)=>{const o=Yo(ue,e.__scopeTooltip),{forceMount:r=o.forceMount,side:a="top",...l}=e,d=he(ue,e.__scopeTooltip);return m.createElement(We,{present:r||d.open},d.disableHoverableContent?m.createElement(Vt,O({side:a},l,{ref:t})):m.createElement(Xo,O({side:a},l,{ref:t})))}),Xo=m.forwardRef((e,t)=>{const o=he(ue,e.__scopeTooltip),r=Ye(ue,e.__scopeTooltip),a=m.useRef(null),l=ne(t,a),[d,u]=m.useState(null),{trigger:n,onClose:s}=o,i=a.current,{onPointerInTransitChange:c}=r,f=m.useCallback(()=>{u(null),c(!1)},[c]),h=m.useCallback((p,w)=>{const v=p.currentTarget,E={x:p.clientX,y:p.clientY},y=qo(E,v.getBoundingClientRect()),x=y==="right"||y==="bottom"?-5:5,N=y==="right"||y==="left"?{x:p.clientX+x,y:p.clientY}:{x:p.clientX,y:p.clientY+x},M=Zo(w.getBoundingClientRect()),C=er([N,...M]);u(C),c(!0)},[c]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(n&&i){const p=v=>h(v,i),w=v=>h(v,n);return n.addEventListener("pointerleave",p),i.addEventListener("pointerleave",w),()=>{n.removeEventListener("pointerleave",p),i.removeEventListener("pointerleave",w)}}},[n,i,h,f]),m.useEffect(()=>{if(d){const p=w=>{const v=w.target,E={x:w.clientX,y:w.clientY},y=(n==null?void 0:n.contains(v))||(i==null?void 0:i.contains(v)),x=!Jo(E,d);y?f():x&&(f(),s())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[n,i,d,s,f]),m.createElement(Vt,O({},e,{ref:l}))}),[Ko,Or]=Ae(Qe,{isInside:!1}),Vt=m.forwardRef((e,t)=>{const{__scopeTooltip:o,children:r,"aria-label":a,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=e,n=he(ue,o),s=Ve(o),{onClose:i}=n;return m.useEffect(()=>(document.addEventListener(Ie,i),()=>document.removeEventListener(Ie,i)),[i]),m.useEffect(()=>{if(n.trigger){const c=f=>{const h=f.target;h!=null&&h.contains(n.trigger)&&i()};return window.addEventListener("scroll",c,{capture:!0}),()=>window.removeEventListener("scroll",c,{capture:!0})}},[n.trigger,i]),m.createElement(Hn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:c=>c.preventDefault(),onDismiss:i},m.createElement(To,O({"data-state":n.stateAttribute},s,u,{ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),m.createElement(At,null,r),m.createElement(Ko,{scope:o,isInside:!0},m.createElement(Io,{id:n.contentId,role:"tooltip"},a||r))))});function qo(e,t){const o=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),l=Math.abs(t.left-e.x);switch(Math.min(o,r,a,l)){case l:return"left";case a:return"right";case o:return"top";case r:return"bottom";default:return null}}function Zo(e){const{top:t,right:o,bottom:r,left:a}=e;return[{x:a,y:t},{x:o,y:t},{x:o,y:r},{x:a,y:r}]}function Jo(e,t){const{x:o,y:r}=e;let a=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l].x,n=t[l].y,s=t[d].x,i=t[d].y;n>r!=i>r&&o<(s-u)*(r-n)/(i-n)+u&&(a=!a)}return a}function er(e){const t=e.slice();return t.sort((o,r)=>o.x<r.x?-1:o.x>r.x?1:o.y<r.y?-1:o.y>r.y?1:0),tr(t)}function tr(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const l=t[t.length-1],d=t[t.length-2];if((l.x-d.x)*(a.y-d.y)>=(l.y-d.y)*(a.x-d.x))t.pop();else break}t.push(a)}t.pop();const o=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;o.length>=2;){const l=o[o.length-1],d=o[o.length-2];if((l.x-d.x)*(a.y-d.y)>=(l.y-d.y)*(a.x-d.x))o.pop();else break}o.push(a)}return o.pop(),t.length===1&&o.length===1&&t[0].x===o[0].x&&t[0].y===o[0].y?t:t.concat(o)}const nr=zo,or=Uo,rr=Wo,sr=Qo,ir=Go,ar=e=>{const{title:t,side:o,children:r}=e;return g.jsx(nr,{delayDuration:0,skipDelayDuration:0,children:g.jsxs(or,{children:[g.jsx(rr,{asChild:!0,children:r}),g.jsx(sr,{children:g.jsx(ir,{className:"bg-zinc-800 text-gray-300 dark:bg-black shadow text-sm p-1 rounded-md z-[99999]",side:o,sideOffset:6,children:t})})]})})},cr=({className:e})=>g.jsx("hr",{className:`${e} block my-1 border-gray-200 dark:border-gray-600`}),lr=e=>{const t=yt(),[o,r]=m.useState([]),a=e.relationList;m.useEffect(()=>{(async()=>{const u=a.map(s=>t.getOrFetchMemoById(s.relatedMemoId)),n=await Promise.all(u);r(n)})()},[a]);const l=d=>{window.open(`/m/${d.id}`,"_blank")};return g.jsx(g.Fragment,{children:o.length>0&&g.jsx("div",{className:"w-full max-w-full overflow-hidden grid grid-cols-1 gap-1 mt-2",children:o.map(d=>g.jsxs("div",{className:"w-auto flex flex-row justify-start items-center hover:bg-gray-100 dark:hover:bg-zinc-800 rounded text-sm p-1 text-gray-500 dark:text-gray-400 cursor-pointer",onClick:()=>l(d),children:[g.jsx("div",{className:"w-5 h-5 flex justify-center items-center shrink-0 bg-gray-100 dark:bg-zinc-800 rounded-full",children:g.jsx(S.Link,{className:"w-3 h-auto"})}),g.jsx("span",{className:"mx-1 w-auto truncate",children:d.content})]},d.id))})})};var dr=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,bt=(e,t,o)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ur=(e,t)=>{for(var o in t||(t={}))Yt.call(t,o)&&bt(e,o,t[o]);if(Pe)for(var o of Pe(t))Qt.call(t,o)&&bt(e,o,t[o]);return e},fr=(e,t)=>{var o={};for(var r in e)Yt.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&Pe)for(var r of Pe(e))t.indexOf(r)<0&&Qt.call(e,r)&&(o[r]=e[r]);return o};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var G;(e=>{const t=class{constructor(n,s,i,c){if(this.version=n,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],n<t.MIN_VERSION||n>t.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=n*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(i);if(this.drawCodewords(h),c==-1){let p=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const v=this.getPenaltyScore();v<p&&(c=w,p=v),this.applyMask(w)}}l(0<=c&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}static encodeText(n,s){const i=e.QrSegment.makeSegments(n);return t.encodeSegments(i,s)}static encodeBinary(n,s){const i=e.QrSegment.makeBytes(n);return t.encodeSegments([i],s)}static encodeSegments(n,s,i=1,c=40,f=-1,h=!0){if(!(t.MIN_VERSION<=i&&i<=c&&c<=t.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,w;for(p=i;;p++){const x=t.getNumDataCodewords(p,s)*8,b=u.getTotalBits(n,p);if(b<=x){w=b;break}if(p>=c)throw new RangeError("Data too long")}for(const x of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])h&&w<=t.getNumDataCodewords(p,x)*8&&(s=x);let v=[];for(const x of n){r(x.mode.modeBits,4,v),r(x.numChars,x.mode.numCharCountBits(p),v);for(const b of x.getData())v.push(b)}l(v.length==w);const E=t.getNumDataCodewords(p,s)*8;l(v.length<=E),r(0,Math.min(4,E-v.length),v),r(0,(8-v.length%8)%8,v),l(v.length%8==0);for(let x=236;v.length<E;x^=253)r(x,8,v);let y=[];for(;y.length*8<v.length;)y.push(0);return v.forEach((x,b)=>y[b>>>3]|=x<<7-(b&7)),new t(p,s,y,f)}getModule(n,s){return 0<=n&&n<this.size&&0<=s&&s<this.size&&this.modules[s][n]}getModules(){return this.modules}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2==0),this.setFunctionModule(i,6,i%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const n=this.getAlignmentPatternPositions(),s=n.length;for(let i=0;i<s;i++)for(let c=0;c<s;c++)i==0&&c==0||i==0&&c==s-1||i==s-1&&c==0||this.drawAlignmentPattern(n[i],n[c]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(n){const s=this.errorCorrectionLevel.formatBits<<3|n;let i=s;for(let f=0;f<10;f++)i=i<<1^(i>>>9)*1335;const c=(s<<10|i)^21522;l(c>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,a(c,f));this.setFunctionModule(8,7,a(c,6)),this.setFunctionModule(8,8,a(c,7)),this.setFunctionModule(7,8,a(c,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,a(c,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,a(c,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,a(c,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let n=this.version;for(let i=0;i<12;i++)n=n<<1^(n>>>11)*7973;const s=this.version<<12|n;l(s>>>18==0);for(let i=0;i<18;i++){const c=a(s,i),f=this.size-11+i%3,h=Math.floor(i/3);this.setFunctionModule(f,h,c),this.setFunctionModule(h,f,c)}}drawFinderPattern(n,s){for(let i=-4;i<=4;i++)for(let c=-4;c<=4;c++){const f=Math.max(Math.abs(c),Math.abs(i)),h=n+c,p=s+i;0<=h&&h<this.size&&0<=p&&p<this.size&&this.setFunctionModule(h,p,f!=2&&f!=4)}}drawAlignmentPattern(n,s){for(let i=-2;i<=2;i++)for(let c=-2;c<=2;c++)this.setFunctionModule(n+c,s+i,Math.max(Math.abs(c),Math.abs(i))!=1)}setFunctionModule(n,s,i){this.modules[s][n]=i,this.isFunction[s][n]=!0}addEccAndInterleave(n){const s=this.version,i=this.errorCorrectionLevel;if(n.length!=t.getNumDataCodewords(s,i))throw new RangeError("Invalid argument");const c=t.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][s],f=t.ECC_CODEWORDS_PER_BLOCK[i.ordinal][s],h=Math.floor(t.getNumRawDataModules(s)/8),p=c-h%c,w=Math.floor(h/c);let v=[];const E=t.reedSolomonComputeDivisor(f);for(let x=0,b=0;x<c;x++){let N=n.slice(b,b+w-f+(x<p?0:1));b+=N.length;const M=t.reedSolomonComputeRemainder(N,E);x<p&&N.push(0),v.push(N.concat(M))}let y=[];for(let x=0;x<v[0].length;x++)v.forEach((b,N)=>{(x!=w-f||N>=p)&&y.push(b[x])});return l(y.length==h),y}drawCodewords(n){if(n.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let s=0;for(let i=this.size-1;i>=1;i-=2){i==6&&(i=5);for(let c=0;c<this.size;c++)for(let f=0;f<2;f++){const h=i-f,w=(i+1&2)==0?this.size-1-c:c;!this.isFunction[w][h]&&s<n.length*8&&(this.modules[w][h]=a(n[s>>>3],7-(s&7)),s++)}}l(s==n.length*8)}applyMask(n){if(n<0||n>7)throw new RangeError("Mask value out of range");for(let s=0;s<this.size;s++)for(let i=0;i<this.size;i++){let c;switch(n){case 0:c=(i+s)%2==0;break;case 1:c=s%2==0;break;case 2:c=i%3==0;break;case 3:c=(i+s)%3==0;break;case 4:c=(Math.floor(i/3)+Math.floor(s/2))%2==0;break;case 5:c=i*s%2+i*s%3==0;break;case 6:c=(i*s%2+i*s%3)%2==0;break;case 7:c=((i+s)%2+i*s%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[s][i]&&c&&(this.modules[s][i]=!this.modules[s][i])}}getPenaltyScore(){let n=0;for(let f=0;f<this.size;f++){let h=!1,p=0,w=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[f][v]==h?(p++,p==5?n+=t.PENALTY_N1:p>5&&n++):(this.finderPenaltyAddHistory(p,w),h||(n+=this.finderPenaltyCountPatterns(w)*t.PENALTY_N3),h=this.modules[f][v],p=1);n+=this.finderPenaltyTerminateAndCount(h,p,w)*t.PENALTY_N3}for(let f=0;f<this.size;f++){let h=!1,p=0,w=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][f]==h?(p++,p==5?n+=t.PENALTY_N1:p>5&&n++):(this.finderPenaltyAddHistory(p,w),h||(n+=this.finderPenaltyCountPatterns(w)*t.PENALTY_N3),h=this.modules[v][f],p=1);n+=this.finderPenaltyTerminateAndCount(h,p,w)*t.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let h=0;h<this.size-1;h++){const p=this.modules[f][h];p==this.modules[f][h+1]&&p==this.modules[f+1][h]&&p==this.modules[f+1][h+1]&&(n+=t.PENALTY_N2)}let s=0;for(const f of this.modules)s=f.reduce((h,p)=>h+(p?1:0),s);const i=this.size*this.size,c=Math.ceil(Math.abs(s*20-i*10)/i)-1;return l(0<=c&&c<=9),n+=c*t.PENALTY_N4,l(0<=n&&n<=2568888),n}getAlignmentPatternPositions(){if(this.version==1)return[];{const n=Math.floor(this.version/7)+2,s=this.version==32?26:Math.ceil((this.version*4+4)/(n*2-2))*2;let i=[6];for(let c=this.size-7;i.length<n;c-=s)i.splice(1,0,c);return i}}static getNumRawDataModules(n){if(n<t.MIN_VERSION||n>t.MAX_VERSION)throw new RangeError("Version number out of range");let s=(16*n+128)*n+64;if(n>=2){const i=Math.floor(n/7)+2;s-=(25*i-10)*i-55,n>=7&&(s-=36)}return l(208<=s&&s<=29648),s}static getNumDataCodewords(n,s){return Math.floor(t.getNumRawDataModules(n)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][n]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][n]}static reedSolomonComputeDivisor(n){if(n<1||n>255)throw new RangeError("Degree out of range");let s=[];for(let c=0;c<n-1;c++)s.push(0);s.push(1);let i=1;for(let c=0;c<n;c++){for(let f=0;f<s.length;f++)s[f]=t.reedSolomonMultiply(s[f],i),f+1<s.length&&(s[f]^=s[f+1]);i=t.reedSolomonMultiply(i,2)}return s}static reedSolomonComputeRemainder(n,s){let i=s.map(c=>0);for(const c of n){const f=c^i.shift();i.push(0),s.forEach((h,p)=>i[p]^=t.reedSolomonMultiply(h,f))}return i}static reedSolomonMultiply(n,s){if(n>>>8||s>>>8)throw new RangeError("Byte out of range");let i=0;for(let c=7;c>=0;c--)i=i<<1^(i>>>7)*285,i^=(s>>>c&1)*n;return l(i>>>8==0),i}finderPenaltyCountPatterns(n){const s=n[1];l(s<=this.size*3);const i=s>0&&n[2]==s&&n[3]==s*3&&n[4]==s&&n[5]==s;return(i&&n[0]>=s*4&&n[6]>=s?1:0)+(i&&n[6]>=s*4&&n[0]>=s?1:0)}finderPenaltyTerminateAndCount(n,s,i){return n&&(this.finderPenaltyAddHistory(s,i),s=0),s+=this.size,this.finderPenaltyAddHistory(s,i),this.finderPenaltyCountPatterns(i)}finderPenaltyAddHistory(n,s){s[0]==0&&(n+=this.size),s.pop(),s.unshift(n)}};let o=t;o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=o;function r(n,s,i){if(s<0||s>31||n>>>s)throw new RangeError("Value out of range");for(let c=s-1;c>=0;c--)i.push(n>>>c&1)}function a(n,s){return(n>>>s&1)!=0}function l(n){if(!n)throw new Error("Assertion error")}const d=class{constructor(n,s,i){if(this.mode=n,this.numChars=s,this.bitData=i,s<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}static makeBytes(n){let s=[];for(const i of n)r(i,8,s);return new d(d.Mode.BYTE,n.length,s)}static makeNumeric(n){if(!d.isNumeric(n))throw new RangeError("String contains non-numeric characters");let s=[];for(let i=0;i<n.length;){const c=Math.min(n.length-i,3);r(parseInt(n.substr(i,c),10),c*3+1,s),i+=c}return new d(d.Mode.NUMERIC,n.length,s)}static makeAlphanumeric(n){if(!d.isAlphanumeric(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");let s=[],i;for(i=0;i+2<=n.length;i+=2){let c=d.ALPHANUMERIC_CHARSET.indexOf(n.charAt(i))*45;c+=d.ALPHANUMERIC_CHARSET.indexOf(n.charAt(i+1)),r(c,11,s)}return i<n.length&&r(d.ALPHANUMERIC_CHARSET.indexOf(n.charAt(i)),6,s),new d(d.Mode.ALPHANUMERIC,n.length,s)}static makeSegments(n){return n==""?[]:d.isNumeric(n)?[d.makeNumeric(n)]:d.isAlphanumeric(n)?[d.makeAlphanumeric(n)]:[d.makeBytes(d.toUtf8ByteArray(n))]}static makeEci(n){let s=[];if(n<0)throw new RangeError("ECI assignment value out of range");if(n<1<<7)r(n,8,s);else if(n<1<<14)r(2,2,s),r(n,14,s);else if(n<1e6)r(6,3,s),r(n,21,s);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,s)}static isNumeric(n){return d.NUMERIC_REGEX.test(n)}static isAlphanumeric(n){return d.ALPHANUMERIC_REGEX.test(n)}getData(){return this.bitData.slice()}static getTotalBits(n,s){let i=0;for(const c of n){const f=c.mode.numCharCountBits(s);if(c.numChars>=1<<f)return 1/0;i+=4+f+c.bitData.length}return i}static toUtf8ByteArray(n){n=encodeURI(n);let s=[];for(let i=0;i<n.length;i++)n.charAt(i)!="%"?s.push(n.charCodeAt(i)):(s.push(parseInt(n.substr(i+1,2),16)),i+=2);return s}};let u=d;u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=u})(G||(G={}));(e=>{(t=>{const o=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let r=o;r.LOW=new o(0,1),r.MEDIUM=new o(1,0),r.QUARTILE=new o(2,3),r.HIGH=new o(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(G||(G={}));(e=>{(t=>{const o=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let r=o;r.NUMERIC=new o(1,[10,12,14]),r.ALPHANUMERIC=new o(2,[9,11,13]),r.BYTE=new o(4,[8,16,16]),r.KANJI=new o(8,[8,10,12]),r.ECI=new o(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(G||(G={}));var ce=G;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var mr={L:ce.QrCode.Ecc.LOW,M:ce.QrCode.Ecc.MEDIUM,Q:ce.QrCode.Ecc.QUARTILE,H:ce.QrCode.Ecc.HIGH},hr=128,pr="L",gr="#FFFFFF",vr="#000000",wr=!1,Gt=4,xr=.1;function br(e,t=0){const o=[];return e.forEach(function(r,a){let l=null;r.forEach(function(d,u){if(!d&&l!==null){o.push(`M${l+t} ${a+t}h${u-l}v1H${l+t}z`),l=null;return}if(u===r.length-1){if(!d)return;l===null?o.push(`M${u+t},${a+t} h1v1H${u+t}z`):o.push(`M${l+t},${a+t} h${u+1-l}v1H${l+t}z`);return}d&&l===null&&(l=u)})}),o.join("")}function yr(e,t){return e.slice().map((o,r)=>r<t.y||r>=t.y+t.h?o:o.map((a,l)=>l<t.x||l>=t.x+t.w?a:!1))}function $r(e,t,o,r){if(r==null)return null;const a=o?Gt:0,l=e.length+a*2,d=Math.floor(t*xr),u=l/t,n=(r.width||d)*u,s=(r.height||d)*u,i=r.x==null?e.length/2-n/2:r.x*u,c=r.y==null?e.length/2-s/2:r.y*u;let f=null;if(r.excavate){let h=Math.floor(i),p=Math.floor(c),w=Math.ceil(n+i-h),v=Math.ceil(s+c-p);f={x:h,y:p,w,h:v}}return{x:i,y:c,h:s,w:n,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function Er(e){const t=e,{value:o,size:r=hr,level:a=pr,bgColor:l=gr,fgColor:d=vr,includeMargin:u=wr,imageSettings:n}=t,s=fr(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let i=ce.QrCode.encodeText(o,mr[a]).getModules();const c=u?Gt:0,f=i.length+c*2,h=$r(i,r,u,n);let p=null;n!=null&&h!=null&&(h.excavation!=null&&(i=yr(i,h.excavation)),p=we.createElement("image",{xlinkHref:n.src,height:h.h,width:h.w,x:h.x+c,y:h.y+c,preserveAspectRatio:"none"}));const w=br(i,c);return we.createElement("svg",ur({height:r,width:r,viewBox:`0 0 ${f} ${f}`},s),we.createElement("path",{fill:l,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),we.createElement("path",{fill:d,d:w,shapeRendering:"crispEdges"}),p)}const Cr=e=>{const{t}=Ne(),{memoId:o,destroy:r}=e,a=()=>`<iframe style="width:100%;height:auto;min-width:256px;" src="${window.location.origin}/m/${o}/embed" frameBorder="0"></iframe>`,l=()=>{$t(a()),Y.success("Succeed to copy code to clipboard.")};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"dialog-header-container",children:[g.jsx("p",{className:"title-text",children:t("embed-memo.title")}),g.jsx("button",{className:"btn close-btn",onClick:()=>r(),children:g.jsx(S.X,{})})]}),g.jsxs("div",{className:"dialog-content-container !w-80",children:[g.jsx("p",{className:"text-base leading-6 mb-2",children:t("embed-memo.text")}),g.jsx("pre",{className:"w-full font-mono text-sm p-3 border rounded-lg",children:g.jsx("code",{className:"w-full break-all whitespace-pre-wrap",children:a()})}),g.jsxs("p",{className:"w-full text-sm leading-6 flex flex-row justify-between items-center mt-2",children:[g.jsx("span",{className:"italic opacity-80",children:t("embed-memo.only-public-supported")}),g.jsx("span",{className:"btn-primary",onClick:l,children:t("embed-memo.copy")})]})]})]})};function Pr(e){Fe({className:"embed-memo-dialog",dialogName:"embed-memo-dialog"},Cr,{memoId:e})}const Nr=e=>{const{memo:t,destroy:o}=e,{t:r}=Ne(),a=Et(),l=Be(),d=xn(),u=a.state.user,{systemStatus:n}=d.state,[s,i]=m.useState({memoAmount:0,memoVisibility:t.visibility,showQRCode:!0}),c=Je(!1),f=Je(),h=m.useRef(null),p={...t,createdAtStr:et(t.createdTs)},w=Math.ceil((Date.now()-bn(u.createdTs))/1e3/3600/24);m.useEffect(()=>{yn(u.id).then(({data:{data:C}})=>{v({memoAmount:C.length}),f.setFinish()}).catch(C=>{console.error(C)})},[]);const v=C=>{i({...s,...C})},E=()=>{o()},y=()=>{h.current&&(c.setLoading(),Pn(h.current,{pixelRatio:window.devicePixelRatio*2}).then(C=>{const $=document.createElement("a");$.href=C,$.download=`memos-${et(Date.now())}.png`,$.click(),c.setFinish()}).catch(C=>{console.error(C)}))},x=()=>{Pr(p.id)},b=()=>{$t(`${window.location.origin}/m/${p.id}`),Y.success(r("message.succeed-copy-link"))},N=$n.map(C=>({value:C.value,text:r(`memo.visibility.${Tn(C.value)}`)})),M=async C=>{const $=C;v({memoVisibility:$}),await l.patchMemo({id:p.id,visibility:$})};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"dialog-header-container py-3 px-4 !mb-0 rounded-t-lg",children:[g.jsxs("p",{className:"",children:[r("common.share")," Memo"]}),g.jsx("button",{className:"btn close-btn",onClick:E,children:g.jsx(S.X,{className:"icon-img"})})]}),g.jsxs("div",{className:"dialog-content-container w-full flex flex-col justify-start items-start relative",children:[g.jsxs("div",{className:"px-4 pb-3 w-full flex flex-row justify-start items-center",children:[g.jsxs("span",{className:"text-sm mr-2",children:[r("common.visibility"),":"]}),g.jsx(En,{className:"!min-w-[10rem] w-auto text-sm",value:s.memoVisibility,onChange:(C,$)=>{$&&M($)},children:N.map(C=>g.jsx(Cn,{value:C.value,className:"whitespace-nowrap",children:C.text},C.value))})]}),g.jsxs("div",{className:"px-4 pb-3 w-full flex flex-row justify-start items-center space-x-2",children:[g.jsxs("button",{disabled:c.isLoading,className:"btn-normal h-8",onClick:y,children:[c.isLoading?g.jsx(S.Loader,{className:"w-4 h-auto mr-1 animate-spin"}):g.jsx(S.Download,{className:"w-4 h-auto mr-1"}),r("common.image")]}),g.jsxs("button",{className:"btn-normal h-8",onClick:x,children:[g.jsx(S.Code,{className:"w-4 h-auto mr-1"}),r("memo.embed")]}),g.jsxs("button",{className:"btn-normal h-8",onClick:b,children:[g.jsx(S.Link,{className:"w-4 h-auto mr-1"}),r("common.link")]})]}),g.jsx("div",{className:"w-full rounded-lg border-t overflow-clip",children:g.jsxs("div",{className:"w-full h-auto select-none relative flex flex-col justify-start items-start bg-white dark:bg-zinc-800",ref:h,children:[g.jsx("span",{className:"w-full px-6 pt-5 pb-2 text-sm text-gray-500",children:p.createdAtStr}),g.jsxs("div",{className:"w-full px-6 text-base pb-4",children:[g.jsx(Ct,{content:p.content,showFull:!0}),g.jsx(Pt,{className:"!grid-cols-2",resourceList:p.resourceList})]}),g.jsxs("div",{className:"flex flex-row justify-between items-center w-full bg-gray-100 dark:bg-zinc-700 py-4 px-6",children:[g.jsx("div",{className:"mr-2",children:g.jsx("img",{className:"h-10 w-auto rounded-lg",src:`${n.customizedProfile.logoUrl||"/logo.webp"}`,alt:""})}),g.jsxs("div",{className:"w-auto grow truncate flex mr-2 flex-col justify-center items-start",children:[g.jsx("span",{className:"w-full text-sm truncate font-bold text-gray-600 dark:text-gray-300",children:u.nickname||u.username}),g.jsxs("span",{className:"text-xs text-gray-400",children:[s.memoAmount," MEMOS / ",w," DAYS"]})]}),g.jsx(Er,{value:`${window.location.origin}/m/${p.id}`,size:40,bgColor:"#F3F4F6",fgColor:"#4B5563",includeMargin:!1})]})]})})]})]})};function Mr(e){Fe({className:"share-memo-dialog",dialogName:"share-memo-dialog"},Nr,{memo:e})}const Rr=e=>{const{t}=Ne(),{destroy:o,memoId:r}=e,a=Be(),[l,d]=m.useState(""),u=tt();m.useEffect(()=>{a.getMemoById(r).then(c=>{if(c){const f=tt(c.createdTs);d(f)}else Y.error(t("message.memo-not-found")),o()})},[]);const n=()=>{o()},s=c=>{const f=c.target.value;d(f)},i=async()=>{const c=nt(),f=nt(l);if(f>c){Y.error(t("message.invalid-created-datetime"));return}try{await a.patchMemo({id:r,createdTs:f}),Y.success(t("message.memo-updated-datetime")),n()}catch(h){console.error(h),Y.error(h.response.data.message)}};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"dialog-header-container",children:[g.jsx("p",{className:"title-text",children:t("message.change-memo-created-time")}),g.jsx("button",{className:"btn close-btn",onClick:n,children:g.jsx(S.X,{})})]}),g.jsxs("div",{className:"flex flex-col justify-start items-start !w-72 max-w-full",children:[g.jsxs("div",{className:"w-full bg-yellow-100 border border-yellow-400 rounded p-2 text-black",children:[g.jsx("p",{className:"uppercase",children:t("message.change-memo-created-time-warning-1")}),g.jsx("p",{children:t("message.change-memo-created-time-warning-2")})]}),g.jsx("input",{className:"input-text mt-2",type:"datetime-local",value:l,max:u,onChange:s}),g.jsxs("div",{className:"flex flex-row justify-end items-center mt-2 w-full",children:[g.jsx("span",{className:"btn-text",onClick:n,children:t("common.cancel")}),g.jsx("span",{className:"btn-primary",onClick:i,children:t("common.save")})]})]})]})};function Ar(e){Fe({className:"change-memo-created-ts-dialog",dialogName:"change-memo-created-ts-dialog"},Rr,{memoId:e})}const Xt=e=>{const{memo:t,readonly:o,showRelatedMemos:r}=e,{t:a,i18n:l}=Ne(),d=Sn(),u=Nn(),n=Et(),s=Be(),i=yt(),[c,f]=m.useState(ot(t.createdTs)),[h,p]=m.useState([]),w=m.useRef(null),v=n.isVisitorMode()||o;m.useEffect(()=>{Promise.allSettled(t.relationList.map(P=>i.getOrFetchMemoById(P.relatedMemoId))).then(P=>{const R=[];for(const A of P)A.status==="fulfilled"&&R.push(A.value);p(it(R,st))})},[t.relationList]),m.useEffect(()=>{let P=-1;return Date.now()-t.createdTs<1e3*60*60*24&&(P=setInterval(()=>{f(ot(t.createdTs))},1e3*1)),()=>{clearInterval(P)}},[l.language]);const E=async()=>{try{t.pinned?await s.unpinMemo(t.id):await s.pinMemo(t.id)}catch{}},y=()=>{d.setEditMemoWithId(t.id)},x=async()=>{try{await s.patchMemo({id:t.id,rowStatus:"ARCHIVED"})}catch(P){console.error(P),Y.error(P.response.data.message)}d.getState().editMemoId===t.id&&d.clearEditMemo()},b=async()=>{Mn({title:a("memo.delete-memo"),content:a("memo.delete-confirm"),style:"warning",dialogName:"delete-memo-dialog",onConfirm:async()=>{await s.deleteMemoById(t.id)}})},N=()=>{Mr(t)},M=async P=>{var A,K;const R=P.target;if(R.className==="tag-span"){const L=R.innerText.slice(1);u.getState().tag===L?u.setTagFilter(void 0):u.setTagFilter(L)}else if(R.classList.contains("todo-block")){if(v)return;const L=(A=R.dataset)==null?void 0:A.value,se=[...((K=w.current)==null?void 0:K.querySelectorAll(`span.todo-block[data-value=${L}]`))??[]];for(const pe of se)if(pe===R){const ge=se.indexOf(pe),ie=t.content.split(L==="DONE"?/- \[x\] /:/- \[ \] /);let k="";for(let I=0;I<ie.length;I++)I===0?k+=`${ie[I]}`:(I===ge+1?k+=L==="DONE"?"- [ ] ":"- [x] ":k+=L==="DONE"?"- [x] ":"- [ ] ",k+=`${ie[I]}`);await s.patchMemo({id:t.id,content:k})}}else if(R.tagName==="IMG"){const L=R.getAttribute("src");L&&Rn([L],0)}},C=P=>{if(v)return;const R=n.state.user;if(R&&!R.localSetting.enableDoubleClickEditing)return;const A=P.target;A.className!=="tag-span"&&(A.classList.contains("todo-block")||d.setEditMemoWithId(t.id))},$=P=>{P.altKey&&(P.preventDefault(),Ar(t.id))},T=P=>{u.getState().visibility===P?u.setMemoVisibilityFilter(void 0):u.setMemoVisibilityFilter(P)},D=()=>{const P={memoId:An,relatedMemoId:t.id,type:"REFERENCE"};d.setRelationList(it([...d.state.relationList,P],st))};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`memo-wrapper ${"memos-"+t.id} ${t.pinned&&!o?"pinned":""}`,ref:w,children:[g.jsxs("div",{className:"memo-top-wrapper",children:[g.jsxs("div",{className:"status-text-container",children:[g.jsx(rt,{className:"time-text",to:`/m/${t.id}`,onClick:$,children:c}),v&&g.jsxs(rt,{className:"name-text",to:`/u/${t.creatorId}`,children:["@",t.creatorName]})]}),!v&&g.jsxs("div",{className:"btns-container space-x-2",children:[t.visibility!=="PRIVATE"&&g.jsx(ar,{title:a(`memo.visibility.${t.visibility.toLowerCase()}`),side:"top",children:g.jsx("div",{onClick:()=>T(t.visibility),children:t.visibility==="PUBLIC"?g.jsx(S.Globe2,{className:"w-4 h-auto cursor-pointer rounded text-green-600"}):g.jsx(S.Users,{className:"w-4 h-auto cursor-pointer rounded text-gray-500 dark:text-gray-400"})})}),t.pinned&&g.jsx(S.Bookmark,{className:"w-4 h-auto rounded text-green-600"}),g.jsx("span",{className:"btn more-action-btn",children:g.jsx(S.MoreHorizontal,{className:"icon-img"})}),g.jsx("div",{className:"more-action-btns-wrapper",children:g.jsxs("div",{className:"more-action-btns-container min-w-[6em]",children:[g.jsxs("span",{className:"btn",onClick:E,children:[t.pinned?g.jsx(S.BookmarkMinus,{className:"w-4 h-auto mr-2"}):g.jsx(S.BookmarkPlus,{className:"w-4 h-auto mr-2"}),t.pinned?a("common.unpin"):a("common.pin")]}),g.jsxs("span",{className:"btn",onClick:y,children:[g.jsx(S.Edit3,{className:"w-4 h-auto mr-2"}),a("common.edit")]}),g.jsxs("span",{className:"btn",onClick:N,children:[g.jsx(S.Share,{className:"w-4 h-auto mr-2"}),a("common.share")]}),g.jsxs("span",{className:"btn",onClick:D,children:[g.jsx(S.Link,{className:"w-4 h-auto mr-2"}),"Mark"]}),g.jsx(cr,{}),g.jsxs("span",{className:"btn text-orange-500",onClick:x,children:[g.jsx(S.Archive,{className:"w-4 h-auto mr-2"}),a("common.archive")]}),g.jsxs("span",{className:"btn text-red-600",onClick:b,children:[g.jsx(S.Trash,{className:"w-4 h-auto mr-2"}),a("common.delete")]})]})})]})]}),g.jsx(Ct,{content:t.content,onMemoContentClick:M,onMemoContentDoubleClick:C}),g.jsx(Pt,{resourceList:t.resourceList}),!r&&g.jsx(lr,{relationList:t.relationList})]}),r&&h.length>0&&g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"text-sm mt-4 mb-1 pl-4 opacity-50 flex flex-row items-center",children:[g.jsx(S.Link,{className:"w-4 h-auto mr-1"}),g.jsx("span",{children:"Related memos"})]}),h.map(P=>g.jsx("div",{className:"w-full",children:g.jsx(Xt,{memo:P,readonly:o})},P.id))]})]})},_r=m.memo(Xt);export{_r as M,Tn as t,Sn as u};
