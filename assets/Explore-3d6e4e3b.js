import{n as A,a4 as L,ah as N,Y as T,r as l,a2 as b,ai as o,aj as x,j as t,ak as k,t as C}from"./index-908d18d9.js";import{M as R}from"./MemoFilter-059516ae.js";import{M as I}from"./Memo-897e6c44.js";import"./memo-b4878e41.js";const B=()=>{const{t:c}=A(),p=L(),g=N(),m=T(),d=g.state,[s,i]=l.useState({memos:[]}),[M,a]=l.useState(!1),f=b();l.useEffect(()=>{m.fetchAllMemos(o,0).then(e=>{e.length<o&&a(!0),i({memos:e}),f.setFinish()})},[p]);const{tag:r,text:w}=d,S=(!!(r||w)?s.memos.filter(e=>{let h=!0;if(r){const u=new Set;for(const y of Array.from(e.content.match(new RegExp(x,"g"))??[])){const E=y.replace(x,"$1").trim().split("/");let n="";for(const F of E)n+=F,u.add(n),n+="/"}u.has(r)||(h=!1)}return h}):s.memos).filter(e=>e.rowStatus==="NORMAL"),j=async()=>{try{const e=await m.fetchAllMemos(o,s.memos.length);e.length<o?a(!0):a(!1),i({memos:s.memos.concat(e)})}catch(e){console.error(e),C.error(e.response.data.message)}};return t.jsxs("section",{className:"w-full max-w-2xl min-h-full flex flex-col justify-start items-center px-4 sm:px-2 sm:pt-4 pb-8 bg-zinc-100 dark:bg-zinc-800",children:[t.jsx(k,{showSearch:!1}),!f.isLoading&&t.jsxs("main",{className:"relative w-full h-auto flex flex-col justify-start items-start -mt-2",children:[t.jsx(R,{}),S.map(e=>t.jsx(I,{memo:e,readonly:!0},`${e.id}-${e.createdTs}`)),M?s.memos.length===0?t.jsx("p",{className:"w-full text-center mt-12 text-gray-600",children:c("message.no-memos")}):null:t.jsx("p",{className:"m-auto text-center mt-4 italic cursor-pointer text-gray-500 hover:text-green-600",onClick:j,children:c("memo.fetch-more")})]})]})};export{B as default};
